

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Orca &mdash; Orca 1.6 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Example" href="example.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="#" class="icon icon-home"> Orca
          

          
          </a>

          
            
            
              <div class="version">
                1.6
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="example.html">Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="core.html">Orca Core</a></li>
<li class="toctree-l1"><a class="reference internal" href="server.html">Orca Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="utils.html">Orca Utilities</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">Orca</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="#" class="icon icon-home"></a> &raquo;</li>
        
      <li>Orca</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="orca">
<h1>Orca<a class="headerlink" href="#orca" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Orca is a pipeline orchestration framework that allows you to define dynamic
data sources and explicitly connect them to processing functions. Orca has many
features for working with <a class="reference external" href="http://pandas.pydata.org/">Pandas</a> data
structures, but it can be used with any data.
Orca was originally designed to orchestrate <a class="reference external" href="http://udst.github.io/urbansim/">UrbanSim</a> simulations and so
has capabilities for running a pipeline multiple times while iterating
over a set of input data.</p>
<div class="section" id="goals">
<h3>Goals<a class="headerlink" href="#goals" title="Permalink to this headline">¶</a></h3>
<p>Orca has explit goals of flexibility, transparency, lazy execution,
and encouraging good practices. Those goals are achieved by:</p>
<ul class="simple">
<li><p>Flexibility</p>
<ul>
<li><p>Users may write and run any Python</p></li>
</ul>
</li>
<li><p>Transparency</p>
<ul>
<li><p>Dependencies between data and processing units are explicitly listed</p></li>
<li><p>Your code is a record of everything that happens</p></li>
</ul>
</li>
<li><p>Lazy execution</p>
<ul>
<li><p>Orca only calls functions if they are explicitly needed</p></li>
</ul>
</li>
<li><p>Good practices</p>
<ul>
<li><p>Encourage small, functional units</p></li>
<li><p>Encourage code re-use</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="components">
<h3>Components<a class="headerlink" href="#components" title="Permalink to this headline">¶</a></h3>
<p>The units of Orca pipelines are Python functions registered with Orca
via decorators.
Orca calls these functions by matching their arguments to other registered
data.
(This format is heavily inspired by
<a class="reference external" href="http://pytest.org/latest/fixture.html#fixture">pytest’s fixtures</a>.)
The main components of a pipeline include:</p>
<ul class="simple">
<li><p>Steps</p>
<ul>
<li><p>Steps are Python functions registered with Orca whose main utility
is via their side-effects.
Some steps will update the pipeline data somehow, maybe by updating
a column in a table or adding rows to a table; other steps might
generate plots or save processed data.</p></li>
</ul>
</li>
<li><p>Tables</p>
<ul>
<li><p>Orca has a built-in understanding of Pandas <a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/dsintro.html#dataframe">DataFrames</a>,
which are referred to as “tables”.
Tables can be registered as plain DataFrames or as
functions that return DataFrames.</p></li>
</ul>
</li>
<li><p>Columns</p>
<ul>
<li><p>Columns can be dynamically added to tables by registering
individual pandas <a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/dsintro.html#series">Series</a> instances or by registering functions
that return Series.</p></li>
</ul>
</li>
<li><p>Injectables</p>
<ul>
<li><p>Functions may need to make use of data that are not in a table/column.
For these you can register any object or any function as an “injectable”
to make it available throughout an Orca pipeline.</p></li>
</ul>
</li>
</ul>
<p>Orca offers some conveniences for streamlining the construction of pipelines:</p>
<ul class="simple">
<li><p>Argument matching</p>
<ul>
<li><p>When a registered function needs to be evaluated, Orca inspects
the function’s argument names and keyword argument values. Orca
matches those arguments to registered variables, such as tables,
columns, or injectables, and calls the function with those arguments
(in turn calling any other functions as necessary and injecting
other arguments).</p></li>
</ul>
</li>
<li><p>Functions as data</p>
<ul>
<li><p>If something needs to be recomputed on-demand you can register
a function that returns your table/column/injectable. That function
will be evaluated anytime the variable is used in the pipeline so
that the value is always current.</p></li>
</ul>
</li>
<li><p>Caching</p>
<ul>
<li><p>Have some data that needs to be computed, but not very frequently?
You can enable caching on individual items to save time, then later clear
the cache on just that item or clear the entire cache in one call.
You can also set limited scopes on caching so that items are removed
from the cache at set intervals.</p></li>
</ul>
</li>
<li><p>Automated Merges</p>
<ul>
<li><p>Orca can merge multiple tables to some target table once you have
described relationships between them.</p></li>
</ul>
</li>
<li><p>Data archives</p>
<ul>
<li><p>After running a pipeline it can be useful to look at how the data changed
as it progressed. Orca can save registered tables out
to an HDF5 file during every iteration or at set intervals.</p></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>Orca requires Pandas, PyTables, and PyToolz, which will be installed automatically if they are not already present in your Python environment.</p>
<p>You can install Orca with pip:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">orca</span>
</pre></div>
</div>
<p>Or with conda:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">install</span> <span class="n">orca</span> <span class="o">--</span><span class="n">channel</span> <span class="n">conda</span><span class="o">-</span><span class="n">forge</span>
</pre></div>
</div>
<p>Add the server option to include the optional server dependencies:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">orca</span><span class="p">[</span><span class="n">server</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="links">
<h2>Links<a class="headerlink" href="#links" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/udst/orca">GitHub</a></p></li>
<li><p><a class="reference external" href="https://pypi.python.org/pypi/orca">PyPi</a></p></li>
</ul>
</div>
<div class="section" id="contents">
<h2>Contents<a class="headerlink" href="#contents" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="example.html">Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="core.html">Orca Core</a><ul>
<li class="toctree-l2"><a class="reference internal" href="core.html#tables">Tables</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.html#columns">Columns</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.html#injectables">Injectables</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.html#caching">Caching</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.html#steps">Steps</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.html#running-pipelines">Running Pipelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.html#argument-matching">Argument Matching</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.html#api">API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="server.html">Orca Server</a><ul>
<li class="toctree-l2"><a class="reference internal" href="server.html#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="server.html#building-the-orca-ui-js-bundle">Building the Orca UI JS Bundle</a></li>
<li class="toctree-l2"><a class="reference internal" href="server.html#start-the-server">Start the Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="server.html#server-routes">Server Routes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="utils.html">Orca Utilities</a><ul>
<li class="toctree-l2"><a class="reference internal" href="utils.html#module-orca.utils.testing">Testing Helpers</a></li>
</ul>
</li>
</ul>
</div>
</div>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="example.html" class="btn btn-neutral float-right" title="Example" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, UrbanSim Inc.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>