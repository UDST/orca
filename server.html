

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Orca Server &mdash; Orca 1.6 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Orca Utilities" href="utils.html" />
    <link rel="prev" title="Orca Core" href="core.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Orca
          

          
          </a>

          
            
            
              <div class="version">
                1.6
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="example.html">Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="core.html">Orca Core</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Orca Server</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="#building-the-orca-ui-js-bundle">Building the Orca UI JS Bundle</a></li>
<li class="toctree-l2"><a class="reference internal" href="#start-the-server">Start the Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="#server-routes">Server Routes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#ui">UI</a></li>
<li class="toctree-l3"><a class="reference internal" href="#schema">Schema</a></li>
<li class="toctree-l3"><a class="reference internal" href="#list-tables">List Tables</a></li>
<li class="toctree-l3"><a class="reference internal" href="#table-info">Table Info</a></li>
<li class="toctree-l3"><a class="reference internal" href="#table-preview">Table Preview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#table-describe">Table Describe</a></li>
<li class="toctree-l3"><a class="reference internal" href="#table-definition">Table Definition</a></li>
<li class="toctree-l3"><a class="reference internal" href="#table-csv">Table CSV</a></li>
<li class="toctree-l3"><a class="reference internal" href="#table-groupby-aggregation">Table Groupby Aggregation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#list-columns-for-table">List Columns For Table</a></li>
<li class="toctree-l3"><a class="reference internal" href="#column-preview">Column Preview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#column-definition">Column Definition</a></li>
<li class="toctree-l3"><a class="reference internal" href="#column-describe">Column Describe</a></li>
<li class="toctree-l3"><a class="reference internal" href="#column-csv">Column CSV</a></li>
<li class="toctree-l3"><a class="reference internal" href="#list-injectables">List Injectables</a></li>
<li class="toctree-l3"><a class="reference internal" href="#injectable-repr">Injectable Repr</a></li>
<li class="toctree-l3"><a class="reference internal" href="#injectable-definition">Injectable Definition</a></li>
<li class="toctree-l3"><a class="reference internal" href="#list-broadcasts">List Broadcasts</a></li>
<li class="toctree-l3"><a class="reference internal" href="#broadcast-definition">Broadcast Definition</a></li>
<li class="toctree-l3"><a class="reference internal" href="#list-steps">List Steps</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-definition">Step Definition</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="utils.html">Orca Utilities</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Orca</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Orca Server</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/server.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="orca-server">
<h1>Orca Server<a class="headerlink" href="#orca-server" title="Permalink to this headline">¶</a></h1>
<p><em>THE ORCA SERVER MODULE IS DEPRECATED AND WILL BE REMOVED IN A FUTURE RELEASE.</em></p>
<p>Orca ships with a <a class="reference external" href="http://flask.pocoo.org/">Flask</a> server that can
provide data about and from an Orca configuration.
You can use it as a zero-configuration server for your data use the
bundled UI to browse an Orca configuration.</p>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<p>The Orca server requires three additional libraries:</p>
<ul class="simple">
<li><p><a class="reference external" href="http://flask.pocoo.org/">Flask</a> &gt;= 0.10</p></li>
<li><p><a class="reference external" href="http://pygments.org/">Pygments</a> &gt;= 2.0</p></li>
<li><p><a class="reference external" href="http://pythonhosted.org/six/">Six</a> &gt;= 1.9</p></li>
</ul>
<p>You can get these libraries individually (they are available via
<a class="reference external" href="https://pip.pypa.io/en/stable/">pip</a> and
<a class="reference external" href="http://conda.pydata.org/">conda</a>), or get them when you install
Orca by including the <code class="docutils literal notranslate"><span class="pre">[server]</span></code> option:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">orca</span><span class="p">[</span><span class="n">server</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="building-the-orca-ui-js-bundle">
<h2>Building the Orca UI JS Bundle<a class="headerlink" href="#building-the-orca-ui-js-bundle" title="Permalink to this headline">¶</a></h2>
<p>This is NOT NECESSARY if you’ve installed Orca from <code class="docutils literal notranslate"><span class="pre">pip</span></code> or <code class="docutils literal notranslate"><span class="pre">conda</span></code>, but these instructions may help if you’re working directly with the Orca source code.</p>
<ul class="simple">
<li><p>Make sure <a class="reference external" href="https://nodejs.org/">nodejs</a> is installed.
(<a class="reference external" href="http://brew.sh/">Homebrew</a> is a nice way to do this on Mac.)</p></li>
<li><p>Install <a class="reference external" href="http://gulpjs.com/">gulp</a>: <code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">install</span> <span class="pre">-g</span> <span class="pre">gulp</span></code></p></li>
<li><p>Change directories to <code class="docutils literal notranslate"><span class="pre">orca/server/static</span></code></p></li>
<li><p>Run <code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">install</span></code> to install dependencies</p></li>
<li><p>Build the bundle: <code class="docutils literal notranslate"><span class="pre">gulp</span> <span class="pre">js-build</span></code>, or</p></li>
<li><p>Watch JS files to rebuild the bundle on changes: <code class="docutils literal notranslate"><span class="pre">gulp</span> <span class="pre">js-watch</span></code></p></li>
</ul>
</div>
<div class="section" id="start-the-server">
<h2>Start the Server<a class="headerlink" href="#start-the-server" title="Permalink to this headline">¶</a></h2>
<p>Use the <code class="docutils literal notranslate"><span class="pre">orca-server</span></code> command line utility to start the Orca server:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">orca</span><span class="o">-</span><span class="n">server</span> <span class="o">--</span><span class="n">help</span>
<span class="n">usage</span><span class="p">:</span> <span class="n">orca</span><span class="o">-</span><span class="n">server</span> <span class="p">[</span><span class="o">-</span><span class="n">h</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">d</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">H</span> <span class="n">HOST</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">p</span> <span class="n">PORT</span><span class="p">]</span> <span class="n">filename</span>

<span class="n">Start</span> <span class="n">a</span> <span class="n">Flask</span> <span class="n">server</span> <span class="n">that</span> <span class="n">has</span> <span class="n">HTTP</span> <span class="n">endpoints</span> <span class="n">that</span> <span class="n">provide</span> <span class="n">data</span> <span class="n">about</span> <span class="n">an</span> <span class="n">Orca</span>
<span class="n">configuration</span> <span class="ow">and</span> <span class="n">data</span> <span class="n">registered</span> <span class="k">with</span> <span class="n">Orca</span><span class="o">.</span>

<span class="n">positional</span> <span class="n">arguments</span><span class="p">:</span>
  <span class="n">filename</span>              <span class="n">File</span> <span class="k">with</span> <span class="n">Orca</span> <span class="n">config</span>

<span class="n">optional</span> <span class="n">arguments</span><span class="p">:</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>            <span class="n">show</span> <span class="n">this</span> <span class="n">help</span> <span class="n">message</span> <span class="ow">and</span> <span class="n">exit</span>
  <span class="o">-</span><span class="n">d</span><span class="p">,</span> <span class="o">--</span><span class="n">debug</span>           <span class="n">Enable</span> <span class="n">Flask</span><span class="s1">&#39;s debug mode</span>
  <span class="o">-</span><span class="n">H</span> <span class="n">HOST</span><span class="p">,</span> <span class="o">--</span><span class="n">host</span> <span class="n">HOST</span>  <span class="n">Hostname</span> <span class="n">on</span> <span class="n">which</span> <span class="n">to</span> <span class="n">run</span> <span class="n">the</span> <span class="n">server</span>
  <span class="o">-</span><span class="n">p</span> <span class="n">PORT</span><span class="p">,</span> <span class="o">--</span><span class="n">port</span> <span class="n">PORT</span>  <span class="n">Port</span> <span class="n">on</span> <span class="n">which</span> <span class="n">to</span> <span class="n">run</span> <span class="n">server</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">filename</span></code> argument is the name of a Python file that will be imported
by the server in order to populate Orca.
Refer to the documentation of Flask’s
<a class="reference external" href="http://flask.pocoo.org/docs/0.10/api/#flask.Flask.run">run method</a>
to learn more about the debug, host, and port options.</p>
</div>
<div class="section" id="server-routes">
<h2>Server Routes<a class="headerlink" href="#server-routes" title="Permalink to this headline">¶</a></h2>
<p>This section details the routes available from the Orca server.
Most of the routes return JSON, but some return text as noted in
the descriptions.</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#ui" id="id1">UI</a></p></li>
<li><p><a class="reference internal" href="#schema" id="id2">Schema</a></p></li>
<li><p><a class="reference internal" href="#list-tables" id="id3">List Tables</a></p></li>
<li><p><a class="reference internal" href="#table-info" id="id4">Table Info</a></p></li>
<li><p><a class="reference internal" href="#table-preview" id="id5">Table Preview</a></p></li>
<li><p><a class="reference internal" href="#table-describe" id="id6">Table Describe</a></p></li>
<li><p><a class="reference internal" href="#table-definition" id="id7">Table Definition</a></p></li>
<li><p><a class="reference internal" href="#table-csv" id="id8">Table CSV</a></p></li>
<li><p><a class="reference internal" href="#table-groupby-aggregation" id="id9">Table Groupby Aggregation</a></p></li>
<li><p><a class="reference internal" href="#list-columns-for-table" id="id10">List Columns For Table</a></p></li>
<li><p><a class="reference internal" href="#column-preview" id="id11">Column Preview</a></p></li>
<li><p><a class="reference internal" href="#column-definition" id="id12">Column Definition</a></p></li>
<li><p><a class="reference internal" href="#column-describe" id="id13">Column Describe</a></p></li>
<li><p><a class="reference internal" href="#column-csv" id="id14">Column CSV</a></p></li>
<li><p><a class="reference internal" href="#list-injectables" id="id15">List Injectables</a></p></li>
<li><p><a class="reference internal" href="#injectable-repr" id="id16">Injectable Repr</a></p></li>
<li><p><a class="reference internal" href="#injectable-definition" id="id17">Injectable Definition</a></p></li>
<li><p><a class="reference internal" href="#list-broadcasts" id="id18">List Broadcasts</a></p></li>
<li><p><a class="reference internal" href="#broadcast-definition" id="id19">Broadcast Definition</a></p></li>
<li><p><a class="reference internal" href="#list-steps" id="id20">List Steps</a></p></li>
<li><p><a class="reference internal" href="#step-definition" id="id21">Step Definition</a></p></li>
</ul>
</div>
<div class="section" id="ui">
<h3><a class="toc-backref" href="#id1">UI</a><a class="headerlink" href="#ui" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Route: <code class="docutils literal notranslate"><span class="pre">/ui</span></code></p></li>
<li><p>Returns: HTML</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">/ui</span></code> route is meant for use with browsers and allows the user to
browse their Orca configuration.
Users can see lists of registered items, data previews, summary statistics,
and the source code definitions of functions registered with Orca.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Using the Orca browser requires an internet connection so the application
can load some third-party CSS and JavaScript.</p>
</div>
</div>
<div class="section" id="schema">
<h3><a class="toc-backref" href="#id2">Schema</a><a class="headerlink" href="#schema" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Route: <code class="docutils literal notranslate"><span class="pre">/schema</span></code></p></li>
<li><p>Returns: JSON</p></li>
</ul>
<p>The “schema” route returns a complete list of available tables, columns, steps,
injectables, and broadcasts.
Columns include both those registered on a table via Orca and those that
are local to a table.
The returned JSON object has keys <code class="docutils literal notranslate"><span class="pre">tables</span></code>, <code class="docutils literal notranslate"><span class="pre">steps</span></code>, <code class="docutils literal notranslate"><span class="pre">injectables</span></code>,
<code class="docutils literal notranslate"><span class="pre">columns</span></code>, and <code class="docutils literal notranslate"><span class="pre">broadcasts</span></code>.
The <code class="docutils literal notranslate"><span class="pre">tables</span></code>, <code class="docutils literal notranslate"><span class="pre">steps</span></code> and <code class="docutils literal notranslate"><span class="pre">injectables</span></code> values are arrays of strings.
The <code class="docutils literal notranslate"><span class="pre">injectables</span></code> value is an array of two-value arrays with the names
of the “cast” and “onto” tables, respectively.
The <code class="docutils literal notranslate"><span class="pre">columns</span></code> value is an object whose keys are table names and values
are arrays of strings (column names).</p>
<p>Example:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;tables&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;my_table&quot;</span><span class="p">,</span> <span class="s2">&quot;another_table&quot;</span><span class="p">],</span>
  <span class="nt">&quot;columns&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;my_table&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;col1&quot;</span><span class="p">,</span> <span class="s2">&quot;col2&quot;</span><span class="p">,</span> <span class="s2">&quot;col3&quot;</span><span class="p">],</span>
    <span class="nt">&quot;another_table&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;data1&quot;</span><span class="p">,</span> <span class="s2">&quot;data2&quot;</span><span class="p">]</span>
  <span class="p">},</span>
  <span class="nt">&quot;injectables&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;val1&quot;</span><span class="p">,</span> <span class="s2">&quot;val2&quot;</span><span class="p">],</span>
  <span class="nt">&quot;steps&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;process_data&quot;</span><span class="p">],</span>
  <span class="nt">&quot;broadcasts&quot;</span><span class="p">:</span> <span class="p">[[</span><span class="s2">&quot;my_table&quot;</span><span class="p">,</span> <span class="s2">&quot;another_table&quot;</span><span class="p">]]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="list-tables">
<h3><a class="toc-backref" href="#id3">List Tables</a><a class="headerlink" href="#list-tables" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Route: <code class="docutils literal notranslate"><span class="pre">/tables</span></code></p></li>
<li><p>Returns: JSON</p></li>
</ul>
<p>The “tables” route returns a list of the tables registered with Orca.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;tables&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;my_table&quot;</span><span class="p">,</span> <span class="s2">&quot;another_table&quot;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="table-info">
<h3><a class="toc-backref" href="#id4">Table Info</a><a class="headerlink" href="#table-info" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Route: <code class="docutils literal notranslate"><span class="pre">/tables/&lt;table_name&gt;/info</span></code></p></li>
<li><p>Returns: Text</p></li>
</ul>
<p>Returns the text result of <code class="docutils literal notranslate"><span class="pre">table.info(verbose=True)</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
Int64Index: 2478 entries, 0 to 2477
Data columns (total 10 columns):
region          2478 non-null object
subregion       2478 non-null object
station         2478 non-null object
abbreviation    2478 non-null object
elevation       2478 non-null int64
month           2478 non-null object
precip          1869 non-null float64
avg precip      2466 non-null float64
pct of avg      1953 non-null float64
year            2478 non-null int64
dtypes: float64(3), int64(2), object(5)
memory usage: 213.0+ KB
</pre></div>
</div>
</div>
<div class="section" id="table-preview">
<h3><a class="toc-backref" href="#id5">Table Preview</a><a class="headerlink" href="#table-preview" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Route: <code class="docutils literal notranslate"><span class="pre">/tables/&lt;table_name&gt;/preview</span></code></p></li>
<li><p>Returns: JSON</p></li>
</ul>
<p>Returns the result of <code class="docutils literal notranslate"><span class="pre">table.head()</span></code> as JSON in Pandas’ “split” format.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;columns&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;col1&quot;</span><span class="p">,</span> <span class="s2">&quot;col2&quot;</span><span class="p">],</span>
  <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">[</span><span class="s2">&quot;datum1&quot;</span><span class="p">,</span> <span class="mi">19</span><span class="p">],</span>
    <span class="p">[</span><span class="s2">&quot;datum2&quot;</span><span class="p">,</span> <span class="mi">42</span><span class="p">],</span>
    <span class="p">[</span><span class="s2">&quot;datum3&quot;</span><span class="p">,</span> <span class="mi">99</span><span class="p">]</span>
  <span class="p">],</span>
  <span class="nt">&quot;index&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">12</span><span class="p">,</span> <span class="mi">26</span><span class="p">,</span> <span class="mi">40</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="table-describe">
<h3><a class="toc-backref" href="#id6">Table Describe</a><a class="headerlink" href="#table-describe" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Route: <code class="docutils literal notranslate"><span class="pre">/tables/&lt;table_name&gt;/describe</span></code></p></li>
<li><p>Returns: JSON</p></li>
</ul>
<p>Returns the result of <code class="docutils literal notranslate"><span class="pre">table.describe()</span></code> as JSON in Pandas’ “split” format.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;columns&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">&quot;elevation&quot;</span><span class="p">,</span>
    <span class="s2">&quot;precip&quot;</span><span class="p">,</span>
  <span class="p">],</span>
  <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">[</span>
      <span class="mf">177.0</span><span class="p">,</span>
      <span class="mf">98.0</span>
    <span class="p">],</span>
    <span class="p">[</span>
      <span class="mf">2782.581920904</span><span class="p">,</span>
      <span class="mf">15.3412244898</span>
    <span class="p">],</span>
    <span class="p">[</span>
      <span class="mf">2540.805957787</span><span class="p">,</span>
      <span class="mf">11.8787421898</span>
    <span class="p">],</span>
    <span class="p">[</span>
      <span class="mf">-194.0</span><span class="p">,</span>
      <span class="mf">1.49</span>
    <span class="p">],</span>
    <span class="p">[</span>
      <span class="mf">384.0</span><span class="p">,</span>
      <span class="mf">5.6075</span>
    <span class="p">],</span>
    <span class="p">[</span>
      <span class="mf">2400.0</span><span class="p">,</span>
      <span class="mf">12.465</span>
    <span class="p">],</span>
    <span class="p">[</span>
      <span class="mf">4641.0</span><span class="p">,</span>
      <span class="mf">20.4625</span>
    <span class="p">],</span>
    <span class="p">[</span>
      <span class="mf">9645.0</span><span class="p">,</span>
      <span class="mf">60.91</span><span class="p">,</span>
    <span class="p">],</span>
  <span class="p">],</span>
  <span class="nt">&quot;index&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">&quot;count&quot;</span><span class="p">,</span>
    <span class="s2">&quot;mean&quot;</span><span class="p">,</span>
    <span class="s2">&quot;std&quot;</span><span class="p">,</span>
    <span class="s2">&quot;min&quot;</span><span class="p">,</span>
    <span class="s2">&quot;25%&quot;</span><span class="p">,</span>
    <span class="s2">&quot;50%&quot;</span><span class="p">,</span>
    <span class="s2">&quot;75%&quot;</span><span class="p">,</span>
    <span class="s2">&quot;max&quot;</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="table-definition">
<h3><a class="toc-backref" href="#id7">Table Definition</a><a class="headerlink" href="#table-definition" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Route: <code class="docutils literal notranslate"><span class="pre">/tables/&lt;table_name&gt;/definition</span></code></p></li>
<li><p>Returns: JSON</p></li>
</ul>
<p>Get information about how a table is registered with Orca, for example whether
it is a registered DataFrame or function.
If the table is a registered function this returns the text of the function.</p>
<p>If the table is a registered DataFrame all that is returned is:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;dataframe&quot;</span><span class="p">}</span>
</pre></div>
</div>
<p>If the table is registered as a function the returned data will include the
filename, line number, and text of the function:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
  <span class="nt">&quot;filename&quot;</span><span class="p">:</span> <span class="s2">&quot;data.py&quot;</span><span class="p">,</span>
  <span class="nt">&quot;lineno&quot;</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
  <span class="nt">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;function text&quot;</span><span class="p">,</span>
  <span class="nt">&quot;html&quot;</span><span class="p">:</span> <span class="s2">&quot;function text as html&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The HTML has been marked up by <a class="reference external" href="http://pygments.org/">Pygments</a> with the
<code class="docutils literal notranslate"><span class="pre">.highlight</span></code> class.</p>
</div>
<div class="section" id="table-csv">
<h3><a class="toc-backref" href="#id8">Table CSV</a><a class="headerlink" href="#table-csv" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Route: <code class="docutils literal notranslate"><span class="pre">/tables/&lt;table_name&gt;/csv</span></code></p></li>
<li><p>Returns: Text</p></li>
</ul>
<p>Returns the entire table as CSV using Pandas’ default CSV output.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">,</span><span class="n">col1</span><span class="p">,</span><span class="n">col2</span>
<span class="mi">12</span><span class="p">,</span><span class="n">datum1</span><span class="p">,</span><span class="mi">19</span>
<span class="mi">26</span><span class="p">,</span><span class="n">datum2</span><span class="p">,</span><span class="mi">42</span>
<span class="mi">40</span><span class="p">,</span><span class="n">datum3</span><span class="p">,</span><span class="mi">99</span>
</pre></div>
</div>
</div>
<div class="section" id="table-groupby-aggregation">
<h3><a class="toc-backref" href="#id9">Table Groupby Aggregation</a><a class="headerlink" href="#table-groupby-aggregation" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Route: <code class="docutils literal notranslate"><span class="pre">/tables/&lt;table_name&gt;/groupbyagg</span></code></p></li>
<li><p>Returns: JSON</p></li>
</ul>
<p>The groupby-agg API allows clients to perform a groupby on a table, then
an aggregation on a single column and get the resulti as JSON
in Pandas’ “split” format.</p>
<p>The parameters of the groupby-agg are specified as URL parameters:</p>
<ul class="simple">
<li><p><cite>column</cite> - Column to aggregate</p></li>
<li><p><cite>agg</cite> - Aggregation to perform. Supported values are <cite>mean</cite>, <cite>median</cite>,
<cite>std</cite>, <cite>sum</cite>, and <cite>size</cite>.</p></li>
<li><p><cite>by</cite> (optional) - Column on which to group table</p></li>
<li><p><cite>level</cite> (optional) - Index level on which to group table</p></li>
</ul>
<p>One of <cite>by</cite> or <cite>level</cite> must be provided, but not both.
For example, the URL might read:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>/groupbyagg?by=region&amp;column=precip&amp;agg=median
</pre></div>
</div>
<p>The data is returned as JSON in Pandas’ “split” format:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">10.225</span><span class="p">,</span> <span class="mf">2.15</span><span class="p">],</span>
  <span class="nt">&quot;index&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;CENTRAL COAST&quot;</span><span class="p">,</span> <span class="s2">&quot;COLORADO RIVER&quot;</span><span class="p">],</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;precip&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="list-columns-for-table">
<h3><a class="toc-backref" href="#id10">List Columns For Table</a><a class="headerlink" href="#list-columns-for-table" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Route: <code class="docutils literal notranslate"><span class="pre">/tables/&lt;table_name&gt;/columns</span></code></p></li>
<li><p>Returns: JSON</p></li>
</ul>
<p>List all columns for a table including both local and registered columns.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;columns&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;col1&quot;</span><span class="p">,</span> <span class="s2">&quot;col2&quot;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="column-preview">
<h3><a class="toc-backref" href="#id11">Column Preview</a><a class="headerlink" href="#column-preview" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Route: <code class="docutils literal notranslate"><span class="pre">/tables/&lt;table_name&gt;/columns/&lt;column_name&gt;/preview</span></code></p></li>
<li><p>Returns: JSON</p></li>
</ul>
<p>Return the first ten elements of a column as JSON in Pandas’ “split” format:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">60.92</span><span class="p">,</span> <span class="mf">12.63</span><span class="p">,</span> <span class="mf">12.06</span><span class="p">,</span> <span class="mf">12.11</span><span class="p">,</span> <span class="mf">26.08</span><span class="p">],</span>
  <span class="nt">&quot;index&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">12</span><span class="p">,</span> <span class="mi">26</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">54</span><span class="p">,</span> <span class="mi">68</span><span class="p">],</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;precip&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="column-definition">
<h3><a class="toc-backref" href="#id12">Column Definition</a><a class="headerlink" href="#column-definition" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Route: <code class="docutils literal notranslate"><span class="pre">/tables/&lt;table_name&gt;/columns/&lt;column_name&gt;/definition</span></code></p></li>
<li><p>Returns: JSON</p></li>
</ul>
<p>Get information about how a column is registered with Orca, for example whether
it is a registered Series or function.
If the column is a registered function this returns the text of the function.</p>
<p>If the column is a registered Series all that is returned is:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;series&quot;</span><span class="p">}</span>
</pre></div>
</div>
<p>or if the column is local to a DataFrame the return value is:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;local&quot;</span><span class="p">}</span>
</pre></div>
</div>
<p>If the column is registered as a function the returned data will include the
filename, line number, and text of the function:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
  <span class="nt">&quot;filename&quot;</span><span class="p">:</span> <span class="s2">&quot;data.py&quot;</span><span class="p">,</span>
  <span class="nt">&quot;lineno&quot;</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
  <span class="nt">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;function text&quot;</span><span class="p">,</span>
  <span class="nt">&quot;html&quot;</span><span class="p">:</span> <span class="s2">&quot;function text as html&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The HTML has been marked up by <a class="reference external" href="http://pygments.org/">Pygments</a> with the
<code class="docutils literal notranslate"><span class="pre">.highlight</span></code> class.</p>
</div>
<div class="section" id="column-describe">
<h3><a class="toc-backref" href="#id13">Column Describe</a><a class="headerlink" href="#column-describe" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Route: <code class="docutils literal notranslate"><span class="pre">/tables/&lt;table_name&gt;/columns/&lt;column_name&gt;/describe</span></code></p></li>
<li><p>Returns: JSON</p></li>
</ul>
<p>Return summary statistics for a column as JSON in Pandas’ “split” format:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="mf">1771.0</span><span class="p">,</span>
    <span class="mf">1.3995482778</span><span class="p">,</span>
    <span class="mf">2.508358979</span><span class="p">,</span>
    <span class="mf">0.0</span><span class="p">,</span>
    <span class="mf">0.07</span><span class="p">,</span>
    <span class="mf">0.57</span><span class="p">,</span>
    <span class="mf">1.445</span><span class="p">,</span>
    <span class="mf">21.34</span>
  <span class="p">],</span>
  <span class="nt">&quot;index&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">&quot;count&quot;</span><span class="p">,</span>
    <span class="s2">&quot;mean&quot;</span><span class="p">,</span>
    <span class="s2">&quot;std&quot;</span><span class="p">,</span>
    <span class="s2">&quot;min&quot;</span><span class="p">,</span>
    <span class="s2">&quot;25%&quot;</span><span class="p">,</span>
    <span class="s2">&quot;50%&quot;</span><span class="p">,</span>
    <span class="s2">&quot;75%&quot;</span><span class="p">,</span>
    <span class="s2">&quot;max&quot;</span>
  <span class="p">],</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;precip&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="column-csv">
<h3><a class="toc-backref" href="#id14">Column CSV</a><a class="headerlink" href="#column-csv" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Route: <code class="docutils literal notranslate"><span class="pre">/tables/&lt;table_name&gt;/columns/&lt;column_name&gt;/csv</span></code></p></li>
<li><p>Returns: Text</p></li>
</ul>
<p>Return an entire column as CSV using Pandas’ default output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">0</span><span class="p">,</span><span class="mf">0.04</span>
<span class="mi">1</span><span class="p">,</span><span class="mf">5.02</span>
<span class="mi">2</span><span class="p">,</span><span class="mf">2.35</span>
<span class="mi">3</span><span class="p">,</span><span class="mf">3.72</span>
<span class="mi">4</span><span class="p">,</span><span class="mf">19.48</span>
</pre></div>
</div>
</div>
<div class="section" id="list-injectables">
<h3><a class="toc-backref" href="#id15">List Injectables</a><a class="headerlink" href="#list-injectables" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Route: <code class="docutils literal notranslate"><span class="pre">/injectables</span></code></p></li>
<li><p>Returns: JSON</p></li>
</ul>
<p>Returns a list of all registered injectables:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;injectables&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;var1&quot;</span><span class="p">,</span> <span class="s2">&quot;var2&quot;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="injectable-repr">
<h3><a class="toc-backref" href="#id16">Injectable Repr</a><a class="headerlink" href="#injectable-repr" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Route: <code class="docutils literal notranslate"><span class="pre">/injectables/&lt;injectable_name&gt;/repr</span></code></p></li>
<li><p>Returns: JSON</p></li>
</ul>
<p>Return the string representations of an injectable and the type of an
injectable:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;repr&quot;</span><span class="p">:</span> <span class="s2">&quot;2014&quot;</span><span class="p">,</span>
  <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;class &#39;int&#39;&gt;&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This will attempt to return the entire string representation of a value.
Use care with variables where that might be large.</p>
</div>
<div class="section" id="injectable-definition">
<h3><a class="toc-backref" href="#id17">Injectable Definition</a><a class="headerlink" href="#injectable-definition" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Route: <code class="docutils literal notranslate"><span class="pre">/injectables/&lt;injectable_name&gt;/definition</span></code></p></li>
<li><p>Returns: JSON</p></li>
</ul>
<p>Get the definition of an injectable. If the injectable is anything other
than a function the result will be:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;variable&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If the injectable is a function the returned data will include the
filename, line number, and text of the function:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
  <span class="nt">&quot;filename&quot;</span><span class="p">:</span> <span class="s2">&quot;data.py&quot;</span><span class="p">,</span>
  <span class="nt">&quot;lineno&quot;</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
  <span class="nt">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;function text&quot;</span><span class="p">,</span>
  <span class="nt">&quot;html&quot;</span><span class="p">:</span> <span class="s2">&quot;function text as html&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The HTML has been marked up by <a class="reference external" href="http://pygments.org/">Pygments</a> with the
<code class="docutils literal notranslate"><span class="pre">.highlight</span></code> class.</p>
</div>
<div class="section" id="list-broadcasts">
<h3><a class="toc-backref" href="#id18">List Broadcasts</a><a class="headerlink" href="#list-broadcasts" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Route: <code class="docutils literal notranslate"><span class="pre">/broadcasts</span></code></p></li>
<li><p>Returns: JSON</p></li>
</ul>
<p>List all registered broadcasts as objects with “cast” and “onto” keys:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;broadcasts&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span><span class="nt">&quot;cast&quot;</span><span class="p">:</span> <span class="s2">&quot;table1&quot;</span><span class="p">,</span> <span class="nt">&quot;onto&quot;</span><span class="p">:</span> <span class="s2">&quot;table2&quot;</span><span class="p">},</span>
    <span class="p">{</span><span class="nt">&quot;cast&quot;</span><span class="p">:</span> <span class="s2">&quot;table3&quot;</span><span class="p">,</span> <span class="nt">&quot;onto&quot;</span><span class="p">:</span> <span class="s2">&quot;table2&quot;</span><span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="broadcast-definition">
<h3><a class="toc-backref" href="#id19">Broadcast Definition</a><a class="headerlink" href="#broadcast-definition" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Route: <code class="docutils literal notranslate"><span class="pre">/broadcasts/&lt;cast_name&gt;/&lt;onto_name&gt;/definition</span></code></p></li>
<li><p>Returns: JSON</p></li>
</ul>
<p>Get the definition of a broadcast, which is essentially the arguments that
were passed to the <a class="reference internal" href="core.html#orca.orca.broadcast" title="orca.orca.broadcast"><code class="xref py py-func docutils literal notranslate"><span class="pre">broadcast()</span></code></a> function to register
the broadcast:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;cast&quot;</span><span class="p">:</span> <span class="s2">&quot;table1&quot;</span><span class="p">,</span>
  <span class="nt">&quot;cast_index&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nt">&quot;cast_on&quot;</span><span class="p">:</span> <span class="s2">&quot;onto_id&quot;</span><span class="p">,</span>
  <span class="nt">&quot;onto&quot;</span><span class="p">:</span> <span class="s2">&quot;table2&quot;</span><span class="p">,</span>
  <span class="nt">&quot;onto_index&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nt">&quot;onto_on&quot;</span><span class="p">:</span> <span class="kc">null</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="list-steps">
<h3><a class="toc-backref" href="#id20">List Steps</a><a class="headerlink" href="#list-steps" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Route: <code class="docutils literal notranslate"><span class="pre">/steps</span></code></p></li>
<li><p>Returns: JSON</p></li>
</ul>
<p>Returns a list of registered step names:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;steps&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;concat_yearly&quot;</span><span class="p">,</span> <span class="s2">&quot;concat_monthly&quot;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="step-definition">
<h3><a class="toc-backref" href="#id21">Step Definition</a><a class="headerlink" href="#step-definition" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Route: <code class="docutils literal notranslate"><span class="pre">/steps/&lt;step_name&gt;/definition</span></code></p></li>
<li><p>Returns: JSON</p></li>
</ul>
<p>Get the source of a step function.
The returned data will include the
filename, line number, and text of the function:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
  <span class="nt">&quot;filename&quot;</span><span class="p">:</span> <span class="s2">&quot;data.py&quot;</span><span class="p">,</span>
  <span class="nt">&quot;lineno&quot;</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
  <span class="nt">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;function text&quot;</span><span class="p">,</span>
  <span class="nt">&quot;html&quot;</span><span class="p">:</span> <span class="s2">&quot;function text as html&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The HTML has been marked up by <a class="reference external" href="http://pygments.org/">Pygments</a> with the
<code class="docutils literal notranslate"><span class="pre">.highlight</span></code> class.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="utils.html" class="btn btn-neutral float-right" title="Orca Utilities" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="core.html" class="btn btn-neutral float-left" title="Orca Core" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, UrbanSim Inc.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>