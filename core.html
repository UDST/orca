

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Orca Core &mdash; Orca 1.6 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Orca Server" href="server.html" />
    <link rel="prev" title="Example" href="example.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Orca
          

          
          </a>

          
            
            
              <div class="version">
                1.6
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="example.html">Example</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Orca Core</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#tables">Tables</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#table-wrappers">Table Wrappers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#automated-merges">Automated Merges</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#columns">Columns</a></li>
<li class="toctree-l2"><a class="reference internal" href="#injectables">Injectables</a></li>
<li class="toctree-l2"><a class="reference internal" href="#caching">Caching</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#cache-scope">Cache Scope</a></li>
<li class="toctree-l3"><a class="reference internal" href="#disabling-caching">Disabling Caching</a></li>
<li class="toctree-l3"><a class="reference internal" href="#manually-clearing-cache">Manually Clearing Cache</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#steps">Steps</a></li>
<li class="toctree-l2"><a class="reference internal" href="#running-pipelines">Running Pipelines</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#running-orca-components-a-la-carte">Running Orca Components a la Carte</a></li>
<li class="toctree-l3"><a class="reference internal" href="#archiving-data">Archiving Data</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#argument-matching">Argument Matching</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#variable-expressions">Variable Expressions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#api">API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#table-api">Table API</a></li>
<li class="toctree-l3"><a class="reference internal" href="#column-api">Column API</a></li>
<li class="toctree-l3"><a class="reference internal" href="#injectable-api">Injectable API</a></li>
<li class="toctree-l3"><a class="reference internal" href="#merge-api">Merge API</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-api">Step API</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cache-api">Cache API</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-orca.orca">API Docs</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="server.html">Orca Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="utils.html">Orca Utilities</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Orca</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Orca Core</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/core.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="orca-core">
<h1>Orca Core<a class="headerlink" href="#orca-core" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In the documentation below the following imports are implied:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">orca</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
</pre></div>
</div>
</div>
<div class="section" id="tables">
<h2>Tables<a class="headerlink" href="#tables" title="Permalink to this headline">¶</a></h2>
<p>Tables are Pandas <a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/dsintro.html#dataframe">DataFrames</a>.
Use the <a class="reference internal" href="#orca.orca.add_table" title="orca.orca.add_table"><code class="xref py py-func docutils literal notranslate"><span class="pre">add_table()</span></code></a> function to register
a DataFrame under a given name:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]})</span>
<span class="n">orca</span><span class="o">.</span><span class="n">add_table</span><span class="p">(</span><span class="s1">&#39;my_table&#39;</span><span class="p">,</span> <span class="n">df</span><span class="p">)</span>
</pre></div>
</div>
<p>Or you can use the decorator <a class="reference internal" href="#orca.orca.table" title="orca.orca.table"><code class="xref py py-func docutils literal notranslate"><span class="pre">table()</span></code></a>
to register a function that returns a DataFrame:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@orca</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="s1">&#39;halve_my_table&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">halve_my_table</span><span class="p">(</span><span class="n">my_table</span><span class="p">):</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">my_table</span><span class="o">.</span><span class="n">to_frame</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">df</span> <span class="o">/</span> <span class="mi">2</span>
</pre></div>
</div>
<p>The decorator argument, which specifies the name to register the table with,
is optional. If left out, the table is registered under the name of the
function that is being decorated. The decorator example above could be
written more concisely:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@orca</span><span class="o">.</span><span class="n">table</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">halve_my_table</span><span class="p">(</span><span class="n">my_table</span><span class="p">):</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">my_table</span><span class="o">.</span><span class="n">to_frame</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">df</span> <span class="o">/</span> <span class="mi">2</span>
</pre></div>
</div>
<p>Note that the decorator parentheses are still required.</p>
<p>By registering <code class="docutils literal notranslate"><span class="pre">halve_my_table</span></code> as a function, its values will always be
half those in <code class="docutils literal notranslate"><span class="pre">my_table</span></code>, even if <code class="docutils literal notranslate"><span class="pre">my_table</span></code> is later changed.
If you’d like a function to <em>not</em> be evaluated every time it
is used, pass the <code class="docutils literal notranslate"><span class="pre">cache=True</span></code> keyword when registering it.</p>
<p>Here’s a demo of the above table definitions shown in IPython:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">19</span><span class="p">]:</span> <span class="n">wrapped</span> <span class="o">=</span> <span class="n">orca</span><span class="o">.</span><span class="n">get_table</span><span class="p">(</span><span class="s1">&#39;halve_my_table&#39;</span><span class="p">)</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">20</span><span class="p">]:</span> <span class="n">wrapped</span><span class="o">.</span><span class="n">to_frame</span><span class="p">()</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">20</span><span class="p">]:</span>
     <span class="n">a</span>
<span class="mi">0</span>  <span class="mf">0.5</span>
<span class="mi">1</span>  <span class="mf">1.0</span>
<span class="mi">2</span>  <span class="mf">1.5</span>
</pre></div>
</div>
<div class="section" id="table-wrappers">
<h3>Table Wrappers<a class="headerlink" href="#table-wrappers" title="Permalink to this headline">¶</a></h3>
<p>Notice in the table function above that we had to call a
<a class="reference internal" href="#orca.orca.DataFrameWrapper.to_frame" title="orca.orca.DataFrameWrapper.to_frame"><code class="xref py py-meth docutils literal notranslate"><span class="pre">to_frame()</span></code></a> method
before using the table in a math operation. The values injected into
functions are not DataFrames, but specialized wrappers.
The wrappers facilitate caching, <a class="reference external" href="#columns">computed columns</a>,
and lazy evaluation of table functions. Learn more in the API documentation:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#orca.orca.DataFrameWrapper" title="orca.orca.DataFrameWrapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrameWrapper</span></code></a></p></li>
<li><p><a class="reference internal" href="#orca.orca.TableFuncWrapper" title="orca.orca.TableFuncWrapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">TableFuncWrapper</span></code></a></p></li>
</ul>
</div>
<div class="section" id="automated-merges">
<h3>Automated Merges<a class="headerlink" href="#automated-merges" title="Permalink to this headline">¶</a></h3>
<p>Certain analyses can be easiest when some tables are merged together,
but in other places it may be best to keep the tables separate.
Orca can make these on-demand merges easy by letting you define table
relationships up front and then performing the merges for you as needed.
We call these relationships “broadcasts” (as in a rule for how to broadcast
one table onto another) and you register them using the
<a class="reference internal" href="#orca.orca.broadcast" title="orca.orca.broadcast"><code class="xref py py-func docutils literal notranslate"><span class="pre">broadcast()</span></code></a> function.</p>
<p>For an example we’ll first define some DataFrames that contain links
to one another and register them with Orca:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">df_a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
    <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]},</span>
    <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;a0&#39;</span><span class="p">,</span> <span class="s1">&#39;a1&#39;</span><span class="p">])</span>
<span class="n">df_b</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
    <span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span>
     <span class="s1">&#39;a_id&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;a0&#39;</span><span class="p">,</span> <span class="s1">&#39;a1&#39;</span><span class="p">,</span> <span class="s1">&#39;a1&#39;</span><span class="p">,</span> <span class="s1">&#39;a0&#39;</span><span class="p">,</span> <span class="s1">&#39;a1&#39;</span><span class="p">]},</span>
    <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;b0&#39;</span><span class="p">,</span> <span class="s1">&#39;b1&#39;</span><span class="p">,</span> <span class="s1">&#39;b2&#39;</span><span class="p">,</span> <span class="s1">&#39;b3&#39;</span><span class="p">,</span> <span class="s1">&#39;b4&#39;</span><span class="p">])</span>
<span class="n">df_c</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
    <span class="p">{</span><span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]},</span>
    <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;c0&#39;</span><span class="p">,</span> <span class="s1">&#39;c1&#39;</span><span class="p">,</span> <span class="s1">&#39;c2&#39;</span><span class="p">])</span>
<span class="n">df_d</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
    <span class="p">{</span><span class="s1">&#39;d&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">19</span><span class="p">],</span>
     <span class="s1">&#39;b_id&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;b2&#39;</span><span class="p">,</span> <span class="s1">&#39;b0&#39;</span><span class="p">,</span> <span class="s1">&#39;b3&#39;</span><span class="p">,</span> <span class="s1">&#39;b3&#39;</span><span class="p">,</span> <span class="s1">&#39;b1&#39;</span><span class="p">,</span> <span class="s1">&#39;b4&#39;</span><span class="p">,</span> <span class="s1">&#39;b1&#39;</span><span class="p">,</span> <span class="s1">&#39;b4&#39;</span><span class="p">,</span> <span class="s1">&#39;b3&#39;</span><span class="p">,</span> <span class="s1">&#39;b3&#39;</span><span class="p">],</span>
     <span class="s1">&#39;c_id&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;c0&#39;</span><span class="p">,</span> <span class="s1">&#39;c1&#39;</span><span class="p">,</span> <span class="s1">&#39;c1&#39;</span><span class="p">,</span> <span class="s1">&#39;c0&#39;</span><span class="p">,</span> <span class="s1">&#39;c0&#39;</span><span class="p">,</span> <span class="s1">&#39;c2&#39;</span><span class="p">,</span> <span class="s1">&#39;c1&#39;</span><span class="p">,</span> <span class="s1">&#39;c2&#39;</span><span class="p">,</span> <span class="s1">&#39;c1&#39;</span><span class="p">,</span> <span class="s1">&#39;c2&#39;</span><span class="p">]},</span>
    <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;d0&#39;</span><span class="p">,</span> <span class="s1">&#39;d1&#39;</span><span class="p">,</span> <span class="s1">&#39;d2&#39;</span><span class="p">,</span> <span class="s1">&#39;d3&#39;</span><span class="p">,</span> <span class="s1">&#39;d4&#39;</span><span class="p">,</span> <span class="s1">&#39;d5&#39;</span><span class="p">,</span> <span class="s1">&#39;d6&#39;</span><span class="p">,</span> <span class="s1">&#39;d7&#39;</span><span class="p">,</span> <span class="s1">&#39;d8&#39;</span><span class="p">,</span> <span class="s1">&#39;d9&#39;</span><span class="p">])</span>

<span class="n">orca</span><span class="o">.</span><span class="n">add_table</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">df_a</span><span class="p">)</span>
<span class="n">orca</span><span class="o">.</span><span class="n">add_table</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="n">df_b</span><span class="p">)</span>
<span class="n">orca</span><span class="o">.</span><span class="n">add_table</span><span class="p">(</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="n">df_c</span><span class="p">)</span>
<span class="n">orca</span><span class="o">.</span><span class="n">add_table</span><span class="p">(</span><span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="n">df_d</span><span class="p">)</span>
</pre></div>
</div>
<p>The tables have data so that ‘a’ can be broadcast onto ‘b’,
and ‘b’ and ‘c’ can be broadcast onto ‘d’.
We use the <a class="reference internal" href="#orca.orca.broadcast" title="orca.orca.broadcast"><code class="xref py py-func docutils literal notranslate"><span class="pre">broadcast()</span></code></a> function
to register those relationships:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">orca</span><span class="o">.</span><span class="n">broadcast</span><span class="p">(</span><span class="n">cast</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">onto</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="n">cast_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">onto_on</span><span class="o">=</span><span class="s1">&#39;a_id&#39;</span><span class="p">)</span>
<span class="n">orca</span><span class="o">.</span><span class="n">broadcast</span><span class="p">(</span><span class="n">cast</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="n">onto</span><span class="o">=</span><span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="n">cast_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">onto_on</span><span class="o">=</span><span class="s1">&#39;b_id&#39;</span><span class="p">)</span>
<span class="n">orca</span><span class="o">.</span><span class="n">broadcast</span><span class="p">(</span><span class="n">cast</span><span class="o">=</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="n">onto</span><span class="o">=</span><span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="n">cast_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">onto_on</span><span class="o">=</span><span class="s1">&#39;c_id&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The syntax is similar to that of the
<a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.merge.html#pandas.merge">pandas merge function</a>,
and indeed <code class="docutils literal notranslate"><span class="pre">merge</span></code> is used behind the scenes.
Once the broadcasts are defined, use the
<a class="reference internal" href="#orca.orca.merge_tables" title="orca.orca.merge_tables"><code class="xref py py-func docutils literal notranslate"><span class="pre">merge_tables()</span></code></a> function to get a
merged DataFrame. Some examples in IPython:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">4</span><span class="p">]:</span> <span class="n">orca</span><span class="o">.</span><span class="n">merge_tables</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="n">tables</span><span class="o">=</span><span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">])</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">4</span><span class="p">]:</span>
   <span class="n">a_id</span>  <span class="n">b</span>  <span class="n">a</span>
<span class="n">b0</span>   <span class="n">a0</span>  <span class="mi">2</span>  <span class="mi">0</span>
<span class="n">b3</span>   <span class="n">a0</span>  <span class="mi">5</span>  <span class="mi">0</span>
<span class="n">b1</span>   <span class="n">a1</span>  <span class="mi">3</span>  <span class="mi">1</span>
<span class="n">b2</span>   <span class="n">a1</span>  <span class="mi">4</span>  <span class="mi">1</span>
<span class="n">b4</span>   <span class="n">a1</span>  <span class="mi">6</span>  <span class="mi">1</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">5</span><span class="p">]:</span> <span class="n">orca</span><span class="o">.</span><span class="n">merge_tables</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="n">tables</span><span class="o">=</span><span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">d</span><span class="p">])</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">5</span><span class="p">]:</span>
   <span class="n">b_id</span> <span class="n">c_id</span>   <span class="n">d</span>  <span class="n">c</span> <span class="n">a_id</span>  <span class="n">b</span>  <span class="n">a</span>
<span class="n">d0</span>   <span class="n">b2</span>   <span class="n">c0</span>  <span class="mi">10</span>  <span class="mi">7</span>   <span class="n">a1</span>  <span class="mi">4</span>  <span class="mi">1</span>
<span class="n">d3</span>   <span class="n">b3</span>   <span class="n">c0</span>  <span class="mi">13</span>  <span class="mi">7</span>   <span class="n">a0</span>  <span class="mi">5</span>  <span class="mi">0</span>
<span class="n">d2</span>   <span class="n">b3</span>   <span class="n">c1</span>  <span class="mi">12</span>  <span class="mi">8</span>   <span class="n">a0</span>  <span class="mi">5</span>  <span class="mi">0</span>
<span class="n">d8</span>   <span class="n">b3</span>   <span class="n">c1</span>  <span class="mi">18</span>  <span class="mi">8</span>   <span class="n">a0</span>  <span class="mi">5</span>  <span class="mi">0</span>
<span class="n">d9</span>   <span class="n">b3</span>   <span class="n">c2</span>  <span class="mi">19</span>  <span class="mi">9</span>   <span class="n">a0</span>  <span class="mi">5</span>  <span class="mi">0</span>
<span class="n">d4</span>   <span class="n">b1</span>   <span class="n">c0</span>  <span class="mi">15</span>  <span class="mi">7</span>   <span class="n">a1</span>  <span class="mi">3</span>  <span class="mi">1</span>
<span class="n">d6</span>   <span class="n">b1</span>   <span class="n">c1</span>  <span class="mi">16</span>  <span class="mi">8</span>   <span class="n">a1</span>  <span class="mi">3</span>  <span class="mi">1</span>
<span class="n">d1</span>   <span class="n">b0</span>   <span class="n">c1</span>  <span class="mi">11</span>  <span class="mi">8</span>   <span class="n">a0</span>  <span class="mi">2</span>  <span class="mi">0</span>
<span class="n">d5</span>   <span class="n">b4</span>   <span class="n">c2</span>  <span class="mi">16</span>  <span class="mi">9</span>   <span class="n">a1</span>  <span class="mi">6</span>  <span class="mi">1</span>
<span class="n">d7</span>   <span class="n">b4</span>   <span class="n">c2</span>  <span class="mi">17</span>  <span class="mi">9</span>   <span class="n">a1</span>  <span class="mi">6</span>  <span class="mi">1</span>
</pre></div>
</div>
<p>Note that it’s the target table’s index that you find in the final merged
table, though the order may have changed.
<a class="reference internal" href="#orca.orca.merge_tables" title="orca.orca.merge_tables"><code class="xref py py-func docutils literal notranslate"><span class="pre">merge_tables()</span></code></a> has an optional
<code class="docutils literal notranslate"><span class="pre">columns=</span></code> keyword that can contain column names from any the tables
going into the merge so you can limit which columns end up in the final table.
(Columns necessary for performing merges will be included whether or not
they are in the <code class="docutils literal notranslate"><span class="pre">columns=</span></code> list.)</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference internal" href="#orca.orca.merge_tables" title="orca.orca.merge_tables"><code class="xref py py-func docutils literal notranslate"><span class="pre">merge_tables()</span></code></a> calls
<a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.merge.html#pandas.merge">pandas.merge</a>
with <code class="docutils literal notranslate"><span class="pre">how='inner'</span></code>, meaning that only items that
appear in both tables are kept in the merged table.</p>
</div>
</div>
</div>
<div class="section" id="columns">
<h2>Columns<a class="headerlink" href="#columns" title="Permalink to this headline">¶</a></h2>
<p>Often, not all the columns you need are preexisting on your tables.
You may need to collect information from other tables
or perform a calculation to generate a column. Orca allows you to
register a <a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/dsintro.html#series">Series</a> or function as a column on a registered table.
Use the <a class="reference internal" href="#orca.orca.add_column" title="orca.orca.add_column"><code class="xref py py-func docutils literal notranslate"><span class="pre">add_column()</span></code></a> function or
the <a class="reference internal" href="#orca.orca.column" title="orca.orca.column"><code class="xref py py-func docutils literal notranslate"><span class="pre">column()</span></code></a> decorator:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">])</span>
<span class="n">orca</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s1">&#39;my_table&#39;</span><span class="p">,</span> <span class="s1">&#39;my_col&#39;</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>

<span class="nd">@orca</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="s1">&#39;my_table&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">my_col_x2</span><span class="p">(</span><span class="n">my_table</span><span class="p">):</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">my_table</span><span class="o">.</span><span class="n">to_frame</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;my_col&#39;</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;my_col&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">2</span>
</pre></div>
</div>
<p>In the <code class="docutils literal notranslate"><span class="pre">my_col_x2</span></code> function we use the <code class="docutils literal notranslate"><span class="pre">columns=</span></code> keyword on
<a class="reference internal" href="#orca.orca.DataFrameWrapper.to_frame" title="orca.orca.DataFrameWrapper.to_frame"><code class="xref py py-meth docutils literal notranslate"><span class="pre">to_frame()</span></code></a> to get only
the one column necessary for our calculation. This can be useful for
avoiding unnecessary computation or to avoid recursion (as would happen
in this case if we called <code class="docutils literal notranslate"><span class="pre">to_frame()</span></code> with no arguments).</p>
<p>Accessing columns on a table is such a common occurrence that there
are additional ways to do so without first calling <code class="docutils literal notranslate"><span class="pre">to_frame()</span></code>
to create an actual <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>.</p>
<p><a class="reference internal" href="#orca.orca.DataFrameWrapper" title="orca.orca.DataFrameWrapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrameWrapper</span></code></a> supports accessing
individual columns in the same ways as <code class="docutils literal notranslate"><span class="pre">DataFrames</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@orca</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="s1">&#39;my_table&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">my_col_x2</span><span class="p">(</span><span class="n">my_table</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">my_table</span><span class="p">[</span><span class="s1">&#39;my_col&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">2</span>  <span class="c1"># or my_table.my_col * 2</span>
</pre></div>
</div>
<p>Or you can use an expression to have a single column injected into a function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@orca</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="s1">&#39;my_table&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">my_col_x2</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="s1">&#39;my_table.my_col&#39;</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">data</span> <span class="o">*</span> <span class="mi">2</span>
</pre></div>
</div>
<p>In this case, the label <code class="docutils literal notranslate"><span class="pre">data</span></code>, expressed as <code class="docutils literal notranslate"><span class="pre">my_table.my_col</span></code>,
refers to the column <code class="docutils literal notranslate"><span class="pre">my_col</span></code>, which is a pandas <a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/dsintro.html#series">Series</a> within
the table <code class="docutils literal notranslate"><span class="pre">my_table</span></code>.</p>
<p>A demonstration in IPython using the column definitions from above:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">29</span><span class="p">]:</span> <span class="n">wrapped</span> <span class="o">=</span> <span class="n">orca</span><span class="o">.</span><span class="n">get_table</span><span class="p">(</span><span class="s1">&#39;my_table&#39;</span><span class="p">)</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">30</span><span class="p">]:</span> <span class="n">wrapped</span><span class="o">.</span><span class="n">columns</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">30</span><span class="p">]:</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;my_col&#39;</span><span class="p">,</span> <span class="s1">&#39;my_col_x2&#39;</span><span class="p">]</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">31</span><span class="p">]:</span> <span class="n">wrapped</span><span class="o">.</span><span class="n">local_columns</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">31</span><span class="p">]:</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">32</span><span class="p">]:</span> <span class="n">wrapped</span><span class="o">.</span><span class="n">to_frame</span><span class="p">()</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">32</span><span class="p">]:</span>
   <span class="n">a</span> <span class="n">my_col_x2</span> <span class="n">my_col</span>
<span class="mi">0</span>  <span class="mi">1</span>        <span class="n">aa</span>      <span class="n">a</span>
<span class="mi">1</span>  <span class="mi">2</span>        <span class="n">bb</span>      <span class="n">b</span>
<span class="mi">2</span>  <span class="mi">3</span>        <span class="n">cc</span>      <span class="n">c</span>
</pre></div>
</div>
<p><a class="reference internal" href="#orca.orca.DataFrameWrapper" title="orca.orca.DataFrameWrapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrameWrapper</span></code></a> has
<a class="reference internal" href="#orca.orca.DataFrameWrapper.columns" title="orca.orca.DataFrameWrapper.columns"><code class="xref py py-attr docutils literal notranslate"><span class="pre">columns</span></code></a>
and <a class="reference internal" href="#orca.orca.DataFrameWrapper.local_columns" title="orca.orca.DataFrameWrapper.local_columns"><code class="xref py py-attr docutils literal notranslate"><span class="pre">local_columns</span></code></a>
attributes that, respectively, list all the columns on a table and
only those columns that are part of the underlying DataFrame.</p>
<p>Columns are stored separate from tables so it is safe to define a column
on a table and then replace that table with something else. The column
will remain associated with the table.</p>
</div>
<div class="section" id="injectables">
<h2>Injectables<a class="headerlink" href="#injectables" title="Permalink to this headline">¶</a></h2>
<p>You will probably want to have things besides tables injected into functions,
for which Orca has “injectables”. You can register <em>anything</em> and have
it injected into functions.
Use the <a class="reference internal" href="#orca.orca.add_injectable" title="orca.orca.add_injectable"><code class="xref py py-func docutils literal notranslate"><span class="pre">add_injectable()</span></code></a> function or the
<a class="reference internal" href="#orca.orca.injectable" title="orca.orca.injectable"><code class="xref py py-func docutils literal notranslate"><span class="pre">injectable()</span></code></a> decorator:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">orca</span><span class="o">.</span><span class="n">add_injectable</span><span class="p">(</span><span class="s1">&#39;z&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>

<span class="nd">@orca</span><span class="o">.</span><span class="n">injectable</span><span class="p">(</span><span class="n">autocall</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">pow</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">**</span> <span class="n">y</span>

<span class="nd">@orca</span><span class="o">.</span><span class="n">injectable</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">zsquared</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="nb">pow</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">pow</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

<span class="nd">@orca</span><span class="o">.</span><span class="n">table</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">ztable</span><span class="p">(</span><span class="n">my_table</span><span class="p">,</span> <span class="n">zsquared</span><span class="p">):</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">my_table</span><span class="o">.</span><span class="n">to_frame</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">df</span> <span class="o">*</span> <span class="n">zsquared</span>
</pre></div>
</div>
<p>By default injectable functions are evaluated before injection and the return
value is passed into other functions. Use <code class="docutils literal notranslate"><span class="pre">autocall=False</span></code> to disable this
behavior and instead inject the function itself.
Like tables and columns, injectable functions that are automatically evaluated
can have their results cached with <code class="docutils literal notranslate"><span class="pre">cache=True</span></code>.</p>
<p>Functions that are not automatically evaluated can also have their results
cached using the <code class="docutils literal notranslate"><span class="pre">memoize=True</span></code> keyword along with <code class="docutils literal notranslate"><span class="pre">autocall=False</span></code>.
A memoized injectable will cache results based on the function inputs,
so this only works if the function inputs are hashable
(usable as dictionary keys).
Memoized functions can have their caches cleared manually using their
<code class="docutils literal notranslate"><span class="pre">clear_cached</span></code> function attribute.
The caches of memoized functions are also hooked into the global Orca
caching system,
so you can also manage their caches via the <code class="docutils literal notranslate"><span class="pre">cache_scope</span></code> keyword argument
and the <a class="reference internal" href="#orca.orca.clear_cache" title="orca.orca.clear_cache"><code class="xref py py-func docutils literal notranslate"><span class="pre">clear_cache()</span></code></a> function.</p>
<p>An example of the above injectables in IPython:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">38</span><span class="p">]:</span> <span class="n">wrapped</span> <span class="o">=</span> <span class="n">orca</span><span class="o">.</span><span class="n">get_table</span><span class="p">(</span><span class="s1">&#39;ztable&#39;</span><span class="p">)</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">39</span><span class="p">]:</span> <span class="n">wrapped</span><span class="o">.</span><span class="n">to_frame</span><span class="p">()</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">39</span><span class="p">]:</span>
    <span class="n">a</span>
<span class="mi">0</span>  <span class="mi">25</span>
<span class="mi">1</span>  <span class="mi">50</span>
<span class="mi">2</span>  <span class="mi">75</span>
</pre></div>
</div>
</div>
<div class="section" id="caching">
<h2>Caching<a class="headerlink" href="#caching" title="Permalink to this headline">¶</a></h2>
<p>Orca has cache system so that function results can be stored for re-use when it
is not necessary to recompute them every time they are used.</p>
<p>The decorators
<a class="reference internal" href="#orca.orca.table" title="orca.orca.table"><code class="xref py py-func docutils literal notranslate"><span class="pre">table()</span></code></a>,
<a class="reference internal" href="#orca.orca.column" title="orca.orca.column"><code class="xref py py-func docutils literal notranslate"><span class="pre">column()</span></code></a>, and
<a class="reference internal" href="#orca.orca.injectable" title="orca.orca.injectable"><code class="xref py py-func docutils literal notranslate"><span class="pre">injectable()</span></code></a>
all take two keyword arguments related to caching:
<code class="docutils literal notranslate"><span class="pre">cache</span></code> and <code class="docutils literal notranslate"><span class="pre">cache_scope</span></code>.</p>
<p>By default results are not cached. Register functions with <code class="docutils literal notranslate"><span class="pre">cache=True</span></code>
to enable caching of their results.</p>
<div class="section" id="cache-scope">
<h3>Cache Scope<a class="headerlink" href="#cache-scope" title="Permalink to this headline">¶</a></h3>
<p>Cached items have an associated “scope” that allows Orca to automatically
manage how long functions have their results cached before re-evaluating them.
The three scope settings are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'forever'</span></code> (the default setting) -
Results are cached until manually cleared by user commands.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'iteration'</span></code> -
Results are cached for the remainder of the current pipeline iteration.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'step'</span></code> -
Results are cached until the current pipeline step finishes.</p></li>
</ul>
<p>An item’s cache scope can be modified using
<a class="reference internal" href="#orca.orca.update_injectable_scope" title="orca.orca.update_injectable_scope"><code class="xref py py-func docutils literal notranslate"><span class="pre">update_injectable_scope()</span></code></a>,
<a class="reference internal" href="#orca.orca.update_table_scope" title="orca.orca.update_table_scope"><code class="xref py py-func docutils literal notranslate"><span class="pre">update_table_scope()</span></code></a>, or
<a class="reference internal" href="#orca.orca.update_column_scope" title="orca.orca.update_column_scope"><code class="xref py py-func docutils literal notranslate"><span class="pre">update_column_scope()</span></code></a>. Omitting the scope or passing <code class="docutils literal notranslate"><span class="pre">None</span></code>
turns caching off for the item. These functions were added in Orca v1.6.</p>
</div>
<div class="section" id="disabling-caching">
<h3>Disabling Caching<a class="headerlink" href="#disabling-caching" title="Permalink to this headline">¶</a></h3>
<p>There may be situations, especially during testing,
that require disabling the caching system.</p>
<p>Caching can be turned off globally using the
<a class="reference internal" href="#orca.orca.disable_cache" title="orca.orca.disable_cache"><code class="xref py py-func docutils literal notranslate"><span class="pre">disable_cache()</span></code></a> function
(and turned back on by <a class="reference internal" href="#orca.orca.enable_cache" title="orca.orca.enable_cache"><code class="xref py py-func docutils literal notranslate"><span class="pre">enable_cache()</span></code></a>).</p>
<p>To run a block of commands with the cache disabled, but have it automatically
re-enabled, use the <code class="xref py py-func docutils literal notranslate"><span class="pre">cache_disabled()</span></code>
context manager:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">orca</span><span class="o">.</span><span class="n">cache_disabled</span><span class="p">():</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">orca</span><span class="o">.</span><span class="n">eval_variable</span><span class="p">(</span><span class="s1">&#39;my_table&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="manually-clearing-cache">
<h3>Manually Clearing Cache<a class="headerlink" href="#manually-clearing-cache" title="Permalink to this headline">¶</a></h3>
<p>Orca’s entire cache can be cleared using <a class="reference internal" href="#orca.orca.clear_cache" title="orca.orca.clear_cache"><code class="xref py py-func docutils literal notranslate"><span class="pre">clear_cache()</span></code></a>.</p>
<p>Cache can also be cleared manually for individual items, to allow finer control
over re-computation. These functions were added in Orca v1.6.</p>
<p>To clear the cached value of an injectable, use
<a class="reference internal" href="#orca.orca.clear_injectable" title="orca.orca.clear_injectable"><code class="xref py py-func docutils literal notranslate"><span class="pre">clear_injectable()</span></code></a>. To clear the cached copy of an entire
table, use <a class="reference internal" href="#orca.orca.clear_table" title="orca.orca.clear_table"><code class="xref py py-func docutils literal notranslate"><span class="pre">clear_table()</span></code></a>.</p>
<p>A dynamically generated column can be cleared using
<a class="reference internal" href="#orca.orca.clear_column" title="orca.orca.clear_column"><code class="xref py py-func docutils literal notranslate"><span class="pre">clear_column()</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">orca</span><span class="o">.</span><span class="n">clear_column</span><span class="p">(</span><span class="s1">&#39;my_table&#39;</span><span class="p">,</span> <span class="s1">&#39;my_col&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>To clear all dynamically generated columns from a table, use
<a class="reference internal" href="#orca.orca.clear_columns" title="orca.orca.clear_columns"><code class="xref py py-func docutils literal notranslate"><span class="pre">clear_columns()</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">orca</span><span class="o">.</span><span class="n">clear_columns</span><span class="p">(</span><span class="s1">&#39;my_table&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Or clear a subset of the columns like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">orca</span><span class="o">.</span><span class="n">clear_columns</span><span class="p">(</span><span class="s1">&#39;my_table&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;col1&#39;</span><span class="p">,</span> <span class="s1">&#39;col2&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="steps">
<h2>Steps<a class="headerlink" href="#steps" title="Permalink to this headline">¶</a></h2>
<p>A step is a function run by Orca with argument matching.
Use the <a class="reference internal" href="#orca.orca.step" title="orca.orca.step"><code class="xref py py-func docutils literal notranslate"><span class="pre">step()</span></code></a> decorator to register a step function.
Steps are generally important for their side-effects, their
return values are discarded during pipeline runs.
For example, a step might replace a column
in a table (a new table, though similar to <code class="docutils literal notranslate"><span class="pre">my_table</span></code> above):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]})</span>
<span class="n">orca</span><span class="o">.</span><span class="n">add_table</span><span class="p">(</span><span class="s1">&#39;new_table&#39;</span><span class="p">,</span> <span class="n">df</span><span class="p">)</span>

<span class="nd">@orca</span><span class="o">.</span><span class="n">step</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">replace_col</span><span class="p">(</span><span class="n">new_table</span><span class="p">):</span>
    <span class="n">new_table</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
</pre></div>
</div>
<p>Or update some values in a column:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@orca</span><span class="o">.</span><span class="n">step</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">update_col</span><span class="p">(</span><span class="n">new_table</span><span class="p">):</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">99</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">new_table</span><span class="o">.</span><span class="n">update_col_from_series</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
</pre></div>
</div>
<p>Or add rows to a table:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@orca</span><span class="o">.</span><span class="n">step</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">add_rows</span><span class="p">(</span><span class="n">new_table</span><span class="p">):</span>
    <span class="n">new_rows</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">101</span><span class="p">]},</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">new_table</span><span class="o">.</span><span class="n">to_frame</span><span class="p">()</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">df</span><span class="p">,</span> <span class="n">new_rows</span><span class="p">])</span>
    <span class="n">orca</span><span class="o">.</span><span class="n">add_table</span><span class="p">(</span><span class="s1">&#39;new_table&#39;</span><span class="p">,</span> <span class="n">df</span><span class="p">)</span>
</pre></div>
</div>
<p>The first two of the above examples update <code class="docutils literal notranslate"><span class="pre">my_tables</span></code>’s underlying
DataFrame and so require it to be a <a class="reference internal" href="#orca.orca.DataFrameWrapper" title="orca.orca.DataFrameWrapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrameWrapper</span></code></a>.
If your table is a wrapped function, not a DataFrame, you can update
columns by replacing them entirely with a new <a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/dsintro.html#series">Series</a> using the
<a class="reference internal" href="#orca.orca.add_column" title="orca.orca.add_column"><code class="xref py py-func docutils literal notranslate"><span class="pre">add_column()</span></code></a> function.</p>
<p>A demonstration of running the above steps:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">68</span><span class="p">]:</span> <span class="n">orca</span><span class="o">.</span><span class="n">run</span><span class="p">([</span><span class="s1">&#39;replace_col&#39;</span><span class="p">,</span> <span class="s1">&#39;update_col&#39;</span><span class="p">,</span> <span class="s1">&#39;add_rows&#39;</span><span class="p">])</span>
<span class="n">Running</span> <span class="n">step</span> <span class="s1">&#39;replace_col&#39;</span>
<span class="n">Running</span> <span class="n">step</span> <span class="s1">&#39;update_col&#39;</span>
<span class="n">Running</span> <span class="n">step</span> <span class="s1">&#39;add_rows&#39;</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">69</span><span class="p">]:</span> <span class="n">orca</span><span class="o">.</span><span class="n">get_table</span><span class="p">(</span><span class="s1">&#39;new_table&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">to_frame</span><span class="p">()</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">69</span><span class="p">]:</span>
     <span class="n">a</span>
<span class="mi">0</span>    <span class="mi">4</span>
<span class="mi">1</span>   <span class="mi">99</span>
<span class="mi">2</span>    <span class="mi">6</span>
<span class="mi">3</span>  <span class="mi">100</span>
<span class="mi">4</span>  <span class="mi">101</span>
</pre></div>
</div>
<p>In the context of a simulation steps can be thought of as model steps
that will often advance the simulation by updating data.
Steps are plain Python functions, though, and there is no restriction on
what they are allowed to do.</p>
</div>
<div class="section" id="running-pipelines">
<h2>Running Pipelines<a class="headerlink" href="#running-pipelines" title="Permalink to this headline">¶</a></h2>
<p>You start pipelines by calling the <a class="reference internal" href="#orca.orca.run" title="orca.orca.run"><code class="xref py py-func docutils literal notranslate"><span class="pre">run()</span></code></a> function and
listing which steps you want to run.
Calling <a class="reference internal" href="#orca.orca.run" title="orca.orca.run"><code class="xref py py-func docutils literal notranslate"><span class="pre">run()</span></code></a> with just a list of steps,
as in the above example, will run through the steps once.
To run the pipeline over some a sequence, provide those values as a sequence
to <a class="reference internal" href="#orca.orca.run" title="orca.orca.run"><code class="xref py py-func docutils literal notranslate"><span class="pre">run()</span></code></a> using the <code class="docutils literal notranslate"><span class="pre">iter_vars</span></code> argument.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">iter_var</span></code> injectable stores the current value from the <code class="docutils literal notranslate"><span class="pre">iter_vars</span></code> argument to <a class="reference internal" href="#orca.orca.run" title="orca.orca.run"><code class="xref py py-func docutils literal notranslate"><span class="pre">run()</span></code></a> function.
The <code class="docutils literal notranslate"><span class="pre">iter_step</span></code> injectable is a <code class="docutils literal notranslate"><span class="pre">namedtuple</span></code> with fields named <code class="docutils literal notranslate"><span class="pre">step_num</span></code> and <code class="docutils literal notranslate"><span class="pre">step_name</span></code>,
stored in that order.
<code class="docutils literal notranslate"><span class="pre">step_num</span></code> is a zero-based index based on the list of step names passed to the <a class="reference internal" href="#orca.orca.run" title="orca.orca.run"><code class="xref py py-func docutils literal notranslate"><span class="pre">run()</span></code></a> function.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">77</span><span class="p">]:</span> <span class="nd">@orca</span><span class="o">.</span><span class="n">step</span><span class="p">()</span>
   <span class="o">....</span><span class="p">:</span> <span class="k">def</span> <span class="nf">print_year</span><span class="p">(</span><span class="n">iter_var</span><span class="p">,</span><span class="n">iter_step</span><span class="p">):</span>
   <span class="o">....</span><span class="p">:</span>         <span class="nb">print</span> <span class="s1">&#39;*** the iteration value is </span><span class="si">{}</span><span class="s1"> ***&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">iter_var</span><span class="p">)</span>
   <span class="o">....</span><span class="p">:</span>         <span class="nb">print</span> <span class="s1">&#39;*** step number </span><span class="si">{0}</span><span class="s1"> is named </span><span class="si">{1}</span><span class="s1"> ***&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">iter_step</span><span class="o">.</span><span class="n">step_num</span><span class="p">,</span> <span class="n">iter_step</span><span class="o">.</span><span class="n">step_name</span><span class="p">)</span>
   <span class="o">....</span><span class="p">:</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">78</span><span class="p">]:</span> <span class="n">orca</span><span class="o">.</span><span class="n">run</span><span class="p">([</span><span class="s1">&#39;print_year&#39;</span><span class="p">],</span> <span class="n">iter_vars</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">2010</span><span class="p">,</span> <span class="mi">2015</span><span class="p">))</span>
<span class="n">Running</span> <span class="n">iteration</span> <span class="mi">1</span> <span class="k">with</span> <span class="n">iteration</span> <span class="n">value</span> <span class="mi">2010</span>
<span class="n">Running</span> <span class="n">step</span> <span class="s1">&#39;print_year&#39;</span>
<span class="o">***</span> <span class="n">the</span> <span class="n">iteration</span> <span class="n">value</span> <span class="ow">is</span> <span class="mi">2010</span> <span class="o">***</span>
<span class="o">***</span> <span class="n">step</span> <span class="n">number</span> <span class="mi">0</span> <span class="ow">is</span> <span class="n">named</span> <span class="n">print_year</span> <span class="o">***</span>
<span class="n">Time</span> <span class="n">to</span> <span class="n">execute</span> <span class="n">step</span> <span class="s1">&#39;print_year&#39;</span><span class="p">:</span> <span class="mf">0.00</span> <span class="n">s</span>
<span class="n">Total</span> <span class="n">time</span> <span class="n">to</span> <span class="n">execute</span> <span class="n">iteration</span> <span class="mi">1</span> <span class="k">with</span> <span class="n">iteration</span> <span class="n">value</span> <span class="mi">2010</span><span class="p">:</span> <span class="mf">0.00</span> <span class="n">s</span>
<span class="n">Running</span> <span class="n">iteration</span> <span class="mi">2</span> <span class="k">with</span> <span class="n">iteration</span> <span class="n">value</span> <span class="mi">2011</span>
<span class="n">Running</span> <span class="n">step</span> <span class="s1">&#39;print_year&#39;</span>
<span class="o">***</span> <span class="n">the</span> <span class="n">iteration</span> <span class="n">value</span> <span class="ow">is</span> <span class="mi">2011</span> <span class="o">***</span>
<span class="o">***</span> <span class="n">step</span> <span class="n">number</span> <span class="mi">0</span> <span class="ow">is</span> <span class="n">named</span> <span class="n">print_year</span> <span class="o">***</span>
<span class="n">Time</span> <span class="n">to</span> <span class="n">execute</span> <span class="n">step</span> <span class="s1">&#39;print_year&#39;</span><span class="p">:</span> <span class="mf">0.00</span> <span class="n">s</span>
<span class="n">Total</span> <span class="n">time</span> <span class="n">to</span> <span class="n">execute</span> <span class="n">iteration</span> <span class="mi">2</span> <span class="k">with</span> <span class="n">iteration</span> <span class="n">value</span> <span class="mi">2011</span><span class="p">:</span> <span class="mf">0.00</span> <span class="n">s</span>
<span class="n">Running</span> <span class="n">iteration</span> <span class="mi">3</span> <span class="k">with</span> <span class="n">iteration</span> <span class="n">value</span> <span class="mi">2012</span>
<span class="n">Running</span> <span class="n">step</span> <span class="s1">&#39;print_year&#39;</span>
<span class="o">***</span> <span class="n">the</span> <span class="n">iteration</span> <span class="n">value</span> <span class="ow">is</span> <span class="mi">2012</span> <span class="o">***</span>
<span class="o">***</span> <span class="n">step</span> <span class="n">number</span> <span class="mi">0</span> <span class="ow">is</span> <span class="n">named</span> <span class="n">print_year</span> <span class="o">***</span>
<span class="n">Time</span> <span class="n">to</span> <span class="n">execute</span> <span class="n">step</span> <span class="s1">&#39;print_year&#39;</span><span class="p">:</span> <span class="mf">0.00</span> <span class="n">s</span>
<span class="n">Total</span> <span class="n">time</span> <span class="n">to</span> <span class="n">execute</span> <span class="n">iteration</span> <span class="mi">3</span> <span class="k">with</span> <span class="n">iteration</span> <span class="n">value</span> <span class="mi">2012</span><span class="p">:</span> <span class="mf">0.00</span> <span class="n">s</span>
<span class="n">Running</span> <span class="n">iteration</span> <span class="mi">4</span> <span class="k">with</span> <span class="n">iteration</span> <span class="n">value</span> <span class="mi">2013</span>
<span class="n">Running</span> <span class="n">step</span> <span class="s1">&#39;print_year&#39;</span>
<span class="o">***</span> <span class="n">the</span> <span class="n">iteration</span> <span class="n">value</span> <span class="ow">is</span> <span class="mi">2013</span> <span class="o">***</span>
<span class="o">***</span> <span class="n">step</span> <span class="n">number</span> <span class="mi">0</span> <span class="ow">is</span> <span class="n">named</span> <span class="n">print_year</span> <span class="o">***</span>
<span class="n">Time</span> <span class="n">to</span> <span class="n">execute</span> <span class="n">step</span> <span class="s1">&#39;print_year&#39;</span><span class="p">:</span> <span class="mf">0.00</span> <span class="n">s</span>
<span class="n">Total</span> <span class="n">time</span> <span class="n">to</span> <span class="n">execute</span> <span class="n">iteration</span> <span class="mi">4</span> <span class="k">with</span> <span class="n">iteration</span> <span class="n">value</span> <span class="mi">2013</span><span class="p">:</span> <span class="mf">0.00</span> <span class="n">s</span>
<span class="n">Running</span> <span class="n">iteration</span> <span class="mi">5</span> <span class="k">with</span> <span class="n">iteration</span> <span class="n">value</span> <span class="mi">2014</span>
<span class="n">Running</span> <span class="n">step</span> <span class="s1">&#39;print_year&#39;</span>
<span class="o">***</span> <span class="n">the</span> <span class="n">iteration</span> <span class="n">value</span> <span class="ow">is</span> <span class="mi">2014</span> <span class="o">***</span>
<span class="o">***</span> <span class="n">step</span> <span class="n">number</span> <span class="mi">0</span> <span class="ow">is</span> <span class="n">named</span> <span class="n">print_year</span> <span class="o">***</span>
<span class="n">Time</span> <span class="n">to</span> <span class="n">execute</span> <span class="n">step</span> <span class="s1">&#39;print_year&#39;</span><span class="p">:</span> <span class="mf">0.00</span> <span class="n">s</span>
<span class="n">Total</span> <span class="n">time</span> <span class="n">to</span> <span class="n">execute</span> <span class="n">iteration</span> <span class="mi">5</span> <span class="k">with</span> <span class="n">iteration</span> <span class="n">value</span> <span class="mi">2014</span><span class="p">:</span> <span class="mf">0.00</span> <span class="n">s</span>
</pre></div>
</div>
<div class="section" id="running-orca-components-a-la-carte">
<h3>Running Orca Components a la Carte<a class="headerlink" href="#running-orca-components-a-la-carte" title="Permalink to this headline">¶</a></h3>
<p>It can be useful to have Orca evaluate single variables and steps,
especially during development and testing.
To achieve this, use the
<a class="reference internal" href="#orca.orca.eval_variable" title="orca.orca.eval_variable"><code class="xref py py-func docutils literal notranslate"><span class="pre">eval_variable()</span></code></a> and
<a class="reference internal" href="#orca.orca.eval_step" title="orca.orca.eval_step"><code class="xref py py-func docutils literal notranslate"><span class="pre">eval_step()</span></code></a> functions.</p>
<p><code class="docutils literal notranslate"><span class="pre">eval_variable</span></code> takes the name of a variable (including variable expressions)
and returns that variable as it would be injected into a function Orca.
<code class="docutils literal notranslate"><span class="pre">eval_step</span></code> takes the name of a step, runs that
step with variable injection, and returns any result.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Most steps don’t have return values because Orca
ignores them, but they can be useful for testing.</p>
</div>
<p>Both <a class="reference internal" href="#orca.orca.eval_variable" title="orca.orca.eval_variable"><code class="xref py py-func docutils literal notranslate"><span class="pre">eval_variable()</span></code></a> and <a class="reference internal" href="#orca.orca.eval_step" title="orca.orca.eval_step"><code class="xref py py-func docutils literal notranslate"><span class="pre">eval_step()</span></code></a>
take arbitrary keyword arguments that are temporarily turned into injectables
within Orca while the evaluation is taking place.
When the evaluation is complete Orca’s state is reset to whatever
it was before calling the <code class="docutils literal notranslate"><span class="pre">eval</span></code> function.</p>
<p>An example of <a class="reference internal" href="#orca.orca.eval_variable" title="orca.orca.eval_variable"><code class="xref py py-func docutils literal notranslate"><span class="pre">eval_variable()</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">15</span><span class="p">]:</span> <span class="nd">@orca</span><span class="o">.</span><span class="n">injectable</span><span class="p">()</span>
   <span class="o">....</span><span class="p">:</span> <span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
   <span class="o">....</span><span class="p">:</span>     <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
   <span class="o">....</span><span class="p">:</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">16</span><span class="p">]:</span> <span class="n">orca</span><span class="o">.</span><span class="n">eval_variable</span><span class="p">(</span><span class="s1">&#39;func&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">16</span><span class="p">]:</span> <span class="mi">3</span>
</pre></div>
</div>
<p>The keyword arguments are only temporarily set as injectables,
which can lead to errors in a situation like this with a table
where the evaluation of the table is delayed until
<a class="reference internal" href="#orca.orca.DataFrameWrapper.to_frame" title="orca.orca.DataFrameWrapper.to_frame"><code class="xref py py-meth docutils literal notranslate"><span class="pre">to_frame()</span></code></a> is called:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">12</span><span class="p">]:</span> <span class="nd">@orca</span><span class="o">.</span><span class="n">table</span><span class="p">()</span>
   <span class="o">....</span><span class="p">:</span> <span class="k">def</span> <span class="nf">table</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
   <span class="o">....</span><span class="p">:</span>     <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">x</span><span class="p">],</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">y</span><span class="p">]})</span>
   <span class="o">....</span><span class="p">:</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">13</span><span class="p">]:</span> <span class="n">orca</span><span class="o">.</span><span class="n">eval_variable</span><span class="p">(</span><span class="s1">&#39;table&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">13</span><span class="p">]:</span> <span class="o">&lt;</span><span class="n">orca</span><span class="o">.</span><span class="n">TableFuncWrapper</span> <span class="n">at</span> <span class="mh">0x100733850</span><span class="o">&gt;</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">14</span><span class="p">]:</span> <span class="n">orca</span><span class="o">.</span><span class="n">eval_variable</span><span class="p">(</span><span class="s1">&#39;table&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">to_frame</span><span class="p">()</span>
<span class="o">---------------------------------------------------------------------------</span>
<span class="ne">KeyError</span>                                  <span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">)</span>
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">14</span><span class="o">-</span><span class="mi">5</span><span class="n">bf660fb07b7</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span><span class="p">()</span>
<span class="o">----&gt;</span> <span class="mi">1</span> <span class="n">orca</span><span class="o">.</span><span class="n">eval_variable</span><span class="p">(</span><span class="s1">&#39;table&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">to_frame</span><span class="p">()</span>

<span class="o">&lt;</span><span class="n">truncated</span><span class="o">&gt;</span>

<span class="ne">KeyError</span><span class="p">:</span> <span class="s1">&#39;y&#39;</span>
</pre></div>
</div>
<p>In order to get the injectables to be set for a controlled term you can
use the <a class="reference internal" href="#orca.orca.injectables" title="orca.orca.injectables"><code class="xref py py-func docutils literal notranslate"><span class="pre">injectables()</span></code></a> context manager
to set the injectables:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">12</span><span class="p">]:</span> <span class="nd">@orca</span><span class="o">.</span><span class="n">table</span><span class="p">()</span>
   <span class="o">....</span><span class="p">:</span> <span class="k">def</span> <span class="nf">table</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
   <span class="o">....</span><span class="p">:</span>     <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">x</span><span class="p">],</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">y</span><span class="p">]})</span>
   <span class="o">....</span><span class="p">:</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">20</span><span class="p">]:</span> <span class="k">with</span> <span class="n">orca</span><span class="o">.</span><span class="n">injectables</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
   <span class="o">....</span><span class="p">:</span>     <span class="n">df</span> <span class="o">=</span> <span class="n">orca</span><span class="o">.</span><span class="n">eval_variable</span><span class="p">(</span><span class="s1">&#39;table&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">to_frame</span><span class="p">()</span>
   <span class="o">....</span><span class="p">:</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">21</span><span class="p">]:</span> <span class="n">df</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">21</span><span class="p">]:</span>
   <span class="n">a</span>  <span class="n">b</span>
<span class="mi">0</span>  <span class="mi">1</span>  <span class="mi">2</span>
</pre></div>
</div>
</div>
<div class="section" id="archiving-data">
<h3>Archiving Data<a class="headerlink" href="#archiving-data" title="Permalink to this headline">¶</a></h3>
<p>An option to the <a class="reference internal" href="#orca.orca.run" title="orca.orca.run"><code class="xref py py-func docutils literal notranslate"><span class="pre">run()</span></code></a> function is to have
it save table data at set intervals.
Tables (and only tables) are saved as <a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/dsintro.html#dataframe">DataFrames</a> to an HDF5 file via pandas’
<a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/io.html#hdf5-pytables">HDFStore</a>
feature. If Orca is running only one loop the tables are stored
under their registered names. If it is running multiple iterations the tables are
stored under names like <code class="docutils literal notranslate"><span class="pre">'&lt;iter_var&gt;/&lt;table</span> <span class="pre">name&gt;'</span></code>.
For example, if <code class="docutils literal notranslate"><span class="pre">iter_var</span></code> is <code class="docutils literal notranslate"><span class="pre">2020</span></code> the “buildings” table would be stored
as <code class="docutils literal notranslate"><span class="pre">'2020/buildings'</span></code>.
The <code class="docutils literal notranslate"><span class="pre">out_interval</span></code> keyword to <a class="reference internal" href="#orca.orca.run" title="orca.orca.run"><code class="xref py py-func docutils literal notranslate"><span class="pre">run()</span></code></a>
controls how often the tables are saved out. For example, <code class="docutils literal notranslate"><span class="pre">out_interval=5</span></code>
saves tables every fifth iteration.
In addition, the final data is always saved
under the key <code class="docutils literal notranslate"><span class="pre">'final/&lt;table</span> <span class="pre">name&gt;'</span></code>.</p>
</div>
</div>
<div class="section" id="argument-matching">
<h2>Argument Matching<a class="headerlink" href="#argument-matching" title="Permalink to this headline">¶</a></h2>
<p>A key feature of Orca is that it matches the names of function arguments to
the names of registered variables in order to
inject variables when evaluating functions.
For that reason, it’s important that variables be registered with names
that are also
<a class="reference external" href="http://en.wikibooks.org/wiki/Python_Beginner_to_Expert/Native_Types">valid Python variables</a>.</p>
<div class="section" id="variable-expressions">
<h3>Variable Expressions<a class="headerlink" href="#variable-expressions" title="Permalink to this headline">¶</a></h3>
<p>Argument matching is extended by a feature we call “variable expressions”.
Expressions allow you to specify a variable to inject with Python keyword
arguments. Here’s an example redone from above using
variable expressions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@orca</span><span class="o">.</span><span class="n">table</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">halve_my_table</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="s1">&#39;my_table&#39;</span><span class="p">):</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">to_frame</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">df</span> <span class="o">/</span> <span class="mi">2</span>
</pre></div>
</div>
<p>The variable registered as <code class="docutils literal notranslate"><span class="pre">'my_table'</span></code> is injected into this function
as the argument <code class="docutils literal notranslate"><span class="pre">data</span></code>.</p>
<p>Expressions can also be used to refer to columns within a registered table:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@orca</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="s1">&#39;my_table&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">halved</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="s1">&#39;my_table.a&#39;</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">data</span> <span class="o">/</span> <span class="mi">2</span>
</pre></div>
</div>
<p>In this case, the expression <code class="docutils literal notranslate"><span class="pre">my_table.a</span></code> refers to the column <code class="docutils literal notranslate"><span class="pre">a</span></code>,
which is a pandas <a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/dsintro.html#series">Series</a> within the table <code class="docutils literal notranslate"><span class="pre">my_table</span></code>. We return
a new Series to register a new column on <code class="docutils literal notranslate"><span class="pre">my_table</span></code> using the
<a class="reference internal" href="#orca.orca.column" title="orca.orca.column"><code class="xref py py-func docutils literal notranslate"><span class="pre">column()</span></code></a> decorator. We can take a
look in IPython:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">21</span><span class="p">]:</span> <span class="n">orca</span><span class="o">.</span><span class="n">get_table</span><span class="p">(</span><span class="s1">&#39;my_table&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">to_frame</span><span class="p">()</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">21</span><span class="p">]:</span>
   <span class="n">a</span>  <span class="n">halved</span>
<span class="mi">0</span>  <span class="mi">1</span>     <span class="mf">0.5</span>
<span class="mi">1</span>  <span class="mi">2</span>     <span class="mf">1.0</span>
<span class="mi">2</span>  <span class="mi">3</span>     <span class="mf">1.5</span>
</pre></div>
</div>
<p>Expressions referring to columns may be useful in situations where a
function requires only a single column from a table and the user would
like to specifically document that in the function’s arguments.</p>
</div>
</div>
<div class="section" id="api">
<h2>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h2>
<div class="section" id="table-api">
<h3>Table API<a class="headerlink" href="#table-api" title="Permalink to this headline">¶</a></h3>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#orca.orca.add_table" title="orca.orca.add_table"><code class="xref py py-obj docutils literal notranslate"><span class="pre">add_table</span></code></a>(table_name, table[, cache, …])</p></td>
<td><p>Register a table with Orca.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#orca.orca.table" title="orca.orca.table"><code class="xref py py-obj docutils literal notranslate"><span class="pre">table</span></code></a>([table_name, cache, cache_scope, copy_col])</p></td>
<td><p>Decorates functions that return DataFrames.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#orca.orca.get_table" title="orca.orca.get_table"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_table</span></code></a>(table_name)</p></td>
<td><p>Get a registered table.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#orca.orca.list_tables" title="orca.orca.list_tables"><code class="xref py py-obj docutils literal notranslate"><span class="pre">list_tables</span></code></a>()</p></td>
<td><p>List of table names.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#orca.orca.DataFrameWrapper" title="orca.orca.DataFrameWrapper"><code class="xref py py-obj docutils literal notranslate"><span class="pre">DataFrameWrapper</span></code></a>(name, frame[, copy_col])</p></td>
<td><p>Wraps a DataFrame so it can provide certain columns and handle computed columns.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#orca.orca.TableFuncWrapper" title="orca.orca.TableFuncWrapper"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TableFuncWrapper</span></code></a>(name, func[, cache, …])</p></td>
<td><p>Wrap a function that provides a DataFrame.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="column-api">
<h3>Column API<a class="headerlink" href="#column-api" title="Permalink to this headline">¶</a></h3>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#orca.orca.add_column" title="orca.orca.add_column"><code class="xref py py-obj docutils literal notranslate"><span class="pre">add_column</span></code></a>(table_name, column_name, column)</p></td>
<td><p>Add a new column to a table from a Series or callable.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#orca.orca.column" title="orca.orca.column"><code class="xref py py-obj docutils literal notranslate"><span class="pre">column</span></code></a>(table_name[, column_name, cache, …])</p></td>
<td><p>Decorates functions that return a Series.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#orca.orca.list_columns" title="orca.orca.list_columns"><code class="xref py py-obj docutils literal notranslate"><span class="pre">list_columns</span></code></a>()</p></td>
<td><p>List of (table name, registered column name) pairs.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="injectable-api">
<h3>Injectable API<a class="headerlink" href="#injectable-api" title="Permalink to this headline">¶</a></h3>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#orca.orca.add_injectable" title="orca.orca.add_injectable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">add_injectable</span></code></a>(name, value[, autocall, …])</p></td>
<td><p>Add a value that will be injected into other functions.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#orca.orca.injectable" title="orca.orca.injectable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">injectable</span></code></a>([name, autocall, cache, …])</p></td>
<td><p>Decorates functions that will be injected into other functions.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#orca.orca.get_injectable" title="orca.orca.get_injectable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_injectable</span></code></a>(name)</p></td>
<td><p>Get an injectable by name.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#orca.orca.list_injectables" title="orca.orca.list_injectables"><code class="xref py py-obj docutils literal notranslate"><span class="pre">list_injectables</span></code></a>()</p></td>
<td><p>List of registered injectables.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="merge-api">
<h3>Merge API<a class="headerlink" href="#merge-api" title="Permalink to this headline">¶</a></h3>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#orca.orca.broadcast" title="orca.orca.broadcast"><code class="xref py py-obj docutils literal notranslate"><span class="pre">broadcast</span></code></a>(cast, onto[, cast_on, onto_on, …])</p></td>
<td><p>Register a rule for merging two tables by broadcasting one onto the other.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#orca.orca.list_broadcasts" title="orca.orca.list_broadcasts"><code class="xref py py-obj docutils literal notranslate"><span class="pre">list_broadcasts</span></code></a>()</p></td>
<td><p>List of registered broadcasts as (cast table name, onto table name).</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#orca.orca.merge_tables" title="orca.orca.merge_tables"><code class="xref py py-obj docutils literal notranslate"><span class="pre">merge_tables</span></code></a>(target, tables[, columns, …])</p></td>
<td><p>Merge a number of tables onto a target table.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="step-api">
<h3>Step API<a class="headerlink" href="#step-api" title="Permalink to this headline">¶</a></h3>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#orca.orca.add_step" title="orca.orca.add_step"><code class="xref py py-obj docutils literal notranslate"><span class="pre">add_step</span></code></a>(step_name, func)</p></td>
<td><p>Add a step function to Orca.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#orca.orca.step" title="orca.orca.step"><code class="xref py py-obj docutils literal notranslate"><span class="pre">step</span></code></a>([step_name])</p></td>
<td><p>Decorates functions that will be called by the <cite>run</cite> function.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#orca.orca.get_step" title="orca.orca.get_step"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_step</span></code></a>(step_name)</p></td>
<td><p>Get a wrapped step by name.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#orca.orca.list_steps" title="orca.orca.list_steps"><code class="xref py py-obj docutils literal notranslate"><span class="pre">list_steps</span></code></a>()</p></td>
<td><p>List of registered step names.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#orca.orca.run" title="orca.orca.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a>(steps[, iter_vars, data_out, …])</p></td>
<td><p>Run steps in series, optionally repeatedly over some sequence.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="cache-api">
<h3>Cache API<a class="headerlink" href="#cache-api" title="Permalink to this headline">¶</a></h3>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#orca.orca.clear_cache" title="orca.orca.clear_cache"><code class="xref py py-obj docutils literal notranslate"><span class="pre">clear_cache</span></code></a>([scope])</p></td>
<td><p>Clear all cached data.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#orca.orca.disable_cache" title="orca.orca.disable_cache"><code class="xref py py-obj docutils literal notranslate"><span class="pre">disable_cache</span></code></a>()</p></td>
<td><p>Turn off caching across Orca, even for registered variables that have caching enabled.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#orca.orca.enable_cache" title="orca.orca.enable_cache"><code class="xref py py-obj docutils literal notranslate"><span class="pre">enable_cache</span></code></a>()</p></td>
<td><p>Allow caching of registered variables that explicitly have caching enabled.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#orca.orca.cache_on" title="orca.orca.cache_on"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cache_on</span></code></a>()</p></td>
<td><p>Whether caching is currently enabled or disabled.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#orca.orca.clear_injectable" title="orca.orca.clear_injectable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">clear_injectable</span></code></a>(injectable_name)</p></td>
<td><p>Clear the cached value of an injectable.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#orca.orca.clear_table" title="orca.orca.clear_table"><code class="xref py py-obj docutils literal notranslate"><span class="pre">clear_table</span></code></a>(table_name)</p></td>
<td><p>Clear the cached copy of an entire table.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#orca.orca.clear_column" title="orca.orca.clear_column"><code class="xref py py-obj docutils literal notranslate"><span class="pre">clear_column</span></code></a>(table_name, column_name)</p></td>
<td><p>Clear the cached copy of a dynamically generated column.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#orca.orca.clear_columns" title="orca.orca.clear_columns"><code class="xref py py-obj docutils literal notranslate"><span class="pre">clear_columns</span></code></a>(table_name[, columns])</p></td>
<td><p>Clear all (or a specified list) of the dynamically generated columns associated with a table.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#orca.orca.update_injectable_scope" title="orca.orca.update_injectable_scope"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_injectable_scope</span></code></a>(name[, new_scope])</p></td>
<td><p>Update the cache scope for a wrapped injectable function.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#orca.orca.update_table_scope" title="orca.orca.update_table_scope"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_table_scope</span></code></a>(name[, new_scope])</p></td>
<td><p>Update the cache scope for a wrapped table function.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#orca.orca.update_column_scope" title="orca.orca.update_column_scope"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_column_scope</span></code></a>(table_name, column_name)</p></td>
<td><p>Update the cache scope for a wrapped column function.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-orca.orca">
<span id="api-docs"></span><h3>API Docs<a class="headerlink" href="#module-orca.orca" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="orca.orca.Broadcast">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">Broadcast</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cast</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">onto</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cast_on</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">onto_on</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cast_index</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">onto_index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.Broadcast" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py attribute">
<dt id="orca.orca.Broadcast.cast">
<code class="sig-name descname"><span class="pre">cast</span></code><a class="headerlink" href="#orca.orca.Broadcast.cast" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

<dl class="py attribute">
<dt id="orca.orca.Broadcast.cast_index">
<code class="sig-name descname"><span class="pre">cast_index</span></code><a class="headerlink" href="#orca.orca.Broadcast.cast_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 4</p>
</dd></dl>

<dl class="py attribute">
<dt id="orca.orca.Broadcast.cast_on">
<code class="sig-name descname"><span class="pre">cast_on</span></code><a class="headerlink" href="#orca.orca.Broadcast.cast_on" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 2</p>
</dd></dl>

<dl class="py attribute">
<dt id="orca.orca.Broadcast.onto">
<code class="sig-name descname"><span class="pre">onto</span></code><a class="headerlink" href="#orca.orca.Broadcast.onto" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

<dl class="py attribute">
<dt id="orca.orca.Broadcast.onto_index">
<code class="sig-name descname"><span class="pre">onto_index</span></code><a class="headerlink" href="#orca.orca.Broadcast.onto_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 5</p>
</dd></dl>

<dl class="py attribute">
<dt id="orca.orca.Broadcast.onto_on">
<code class="sig-name descname"><span class="pre">onto_on</span></code><a class="headerlink" href="#orca.orca.Broadcast.onto_on" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 3</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="orca.orca.CacheItem">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">CacheItem</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scope</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.CacheItem" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py attribute">
<dt id="orca.orca.CacheItem.name">
<code class="sig-name descname"><span class="pre">name</span></code><a class="headerlink" href="#orca.orca.CacheItem.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

<dl class="py attribute">
<dt id="orca.orca.CacheItem.scope">
<code class="sig-name descname"><span class="pre">scope</span></code><a class="headerlink" href="#orca.orca.CacheItem.scope" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 2</p>
</dd></dl>

<dl class="py attribute">
<dt id="orca.orca.CacheItem.value">
<code class="sig-name descname"><span class="pre">value</span></code><a class="headerlink" href="#orca.orca.CacheItem.value" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="orca.orca.DataFrameWrapper">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">DataFrameWrapper</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">frame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">copy_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.DataFrameWrapper" title="Permalink to this definition">¶</a></dt>
<dd><p>Wraps a DataFrame so it can provide certain columns and handle
computed columns.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>name</strong><span class="classifier">str</span></dt><dd><p>Name for the table.</p>
</dd>
<dt><strong>frame</strong><span class="classifier">pandas.DataFrame</span></dt><dd></dd>
<dt><strong>copy_col</strong><span class="classifier">bool, optional</span></dt><dd><p>Whether to return copies when evaluating columns.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Attributes</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>name</strong><span class="classifier">str</span></dt><dd><p>Table name.</p>
</dd>
<dt><strong>copy_col</strong><span class="classifier">bool</span></dt><dd><p>Whether to return copies when evaluating columns.</p>
</dd>
<dt><strong>local</strong><span class="classifier">pandas.DataFrame</span></dt><dd><p>The wrapped DataFrame.</p>
</dd>
</dl>
</dd>
</dl>
<dl class="py method">
<dt id="orca.orca.DataFrameWrapper.clear_cached">
<code class="sig-name descname"><span class="pre">clear_cached</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.DataFrameWrapper.clear_cached" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove cached results from this table’s computed columns.</p>
</dd></dl>

<dl class="py method">
<dt id="orca.orca.DataFrameWrapper.column_type">
<code class="sig-name descname"><span class="pre">column_type</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">column_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.DataFrameWrapper.column_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Report column type as one of ‘local’, ‘series’, or ‘function’.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>column_name</strong><span class="classifier">str</span></dt><dd></dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>col_type</strong><span class="classifier">{‘local’, ‘series’, ‘function’}</span></dt><dd><p>‘local’ means that the column is part of the registered table,
‘series’ means the column is a registered Pandas Series,
and ‘function’ means the column is a registered function providing
a Pandas Series.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="orca.orca.DataFrameWrapper.columns">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">columns</span></code><a class="headerlink" href="#orca.orca.DataFrameWrapper.columns" title="Permalink to this definition">¶</a></dt>
<dd><p>Columns in this table.</p>
</dd></dl>

<dl class="py method">
<dt id="orca.orca.DataFrameWrapper.get_column">
<code class="sig-name descname"><span class="pre">get_column</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">column_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.DataFrameWrapper.get_column" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a column as a Series.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>column_name</strong><span class="classifier">str</span></dt><dd></dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>column</strong><span class="classifier">pandas.Series</span></dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="orca.orca.DataFrameWrapper.index">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">index</span></code><a class="headerlink" href="#orca.orca.DataFrameWrapper.index" title="Permalink to this definition">¶</a></dt>
<dd><p>Table index.</p>
</dd></dl>

<dl class="py method">
<dt id="orca.orca.DataFrameWrapper.local_columns">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">local_columns</span></code><a class="headerlink" href="#orca.orca.DataFrameWrapper.local_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>Columns that are part of the wrapped DataFrame.</p>
</dd></dl>

<dl class="py method">
<dt id="orca.orca.DataFrameWrapper.to_frame">
<code class="sig-name descname"><span class="pre">to_frame</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.DataFrameWrapper.to_frame" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a DataFrame with the given columns.</p>
<p>Will always return a copy of the underlying table.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>columns</strong><span class="classifier">sequence or string, optional</span></dt><dd><p>Sequence of the column names desired in the DataFrame. A string
can also be passed if only one column is desired.
If None all columns are returned, including registered columns.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>frame</strong><span class="classifier">pandas.DataFrame</span></dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="orca.orca.DataFrameWrapper.update_col">
<code class="sig-name descname"><span class="pre">update_col</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">column_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">series</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.DataFrameWrapper.update_col" title="Permalink to this definition">¶</a></dt>
<dd><p>Add or replace a column in the underlying DataFrame.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>column_name</strong><span class="classifier">str</span></dt><dd><p>Column to add or replace.</p>
</dd>
<dt><strong>series</strong><span class="classifier">pandas.Series or sequence</span></dt><dd><p>Column data.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="orca.orca.DataFrameWrapper.update_col_from_series">
<code class="sig-name descname"><span class="pre">update_col_from_series</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">column_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cast</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.DataFrameWrapper.update_col_from_series" title="Permalink to this definition">¶</a></dt>
<dd><p>Update existing values in a column from another series.
Index values must match in both column and series. Optionally
casts data type to match the existing column.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>column_name</strong><span class="classifier">str</span></dt><dd></dd>
<dt><strong>series</strong><span class="classifier">panas.Series</span></dt><dd></dd>
<dt><strong>cast: bool, optional, default False</strong></dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt id="orca.orca.OrcaError">
<em class="property"><span class="pre">exception</span> </em><code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">OrcaError</span></code><a class="headerlink" href="#orca.orca.OrcaError" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt id="orca.orca.TableFuncWrapper">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">TableFuncWrapper</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">func</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_scope</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'forever'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">copy_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.TableFuncWrapper" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrap a function that provides a DataFrame.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>name</strong><span class="classifier">str</span></dt><dd><p>Name for the table.</p>
</dd>
<dt><strong>func</strong><span class="classifier">callable</span></dt><dd><p>Callable that returns a DataFrame.</p>
</dd>
<dt><strong>cache</strong><span class="classifier">bool, optional</span></dt><dd><p>Whether to cache the results of calling the wrapped function.</p>
</dd>
<dt><strong>cache_scope</strong><span class="classifier">{‘step’, ‘iteration’, ‘forever’}, optional</span></dt><dd><p>Scope for which to cache data. Default is to cache forever
(or until manually cleared). ‘iteration’ caches data for each
complete iteration of the pipeline, ‘step’ caches data for
a single step of the pipeline.</p>
</dd>
<dt><strong>copy_col</strong><span class="classifier">bool, optional</span></dt><dd><p>Whether to return copies when evaluating columns.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Attributes</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>name</strong><span class="classifier">str</span></dt><dd><p>Table name.</p>
</dd>
<dt><strong>cache</strong><span class="classifier">bool</span></dt><dd><p>Whether caching is enabled for this table.</p>
</dd>
<dt><strong>copy_col</strong><span class="classifier">bool</span></dt><dd><p>Whether to return copies when evaluating columns.</p>
</dd>
</dl>
</dd>
</dl>
<dl class="py method">
<dt id="orca.orca.TableFuncWrapper.clear_cached">
<code class="sig-name descname"><span class="pre">clear_cached</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.TableFuncWrapper.clear_cached" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove this table’s cached result and that of associated columns.</p>
</dd></dl>

<dl class="py method">
<dt id="orca.orca.TableFuncWrapper.column_type">
<code class="sig-name descname"><span class="pre">column_type</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">column_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.TableFuncWrapper.column_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Report column type as one of ‘local’, ‘series’, or ‘function’.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>column_name</strong><span class="classifier">str</span></dt><dd></dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>col_type</strong><span class="classifier">{‘local’, ‘series’, ‘function’}</span></dt><dd><p>‘local’ means that the column is part of the registered table,
‘series’ means the column is a registered Pandas Series,
and ‘function’ means the column is a registered function providing
a Pandas Series.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="orca.orca.TableFuncWrapper.columns">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">columns</span></code><a class="headerlink" href="#orca.orca.TableFuncWrapper.columns" title="Permalink to this definition">¶</a></dt>
<dd><p>Columns in this table. (May contain only computed columns
if the wrapped function has not been called yet.)</p>
</dd></dl>

<dl class="py method">
<dt id="orca.orca.TableFuncWrapper.func_source_data">
<code class="sig-name descname"><span class="pre">func_source_data</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.TableFuncWrapper.func_source_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Return data about the wrapped function source, including file name,
line number, and source code.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>filename</strong><span class="classifier">str</span></dt><dd></dd>
<dt><strong>lineno</strong><span class="classifier">int</span></dt><dd><p>The line number on which the function starts.</p>
</dd>
<dt><strong>source</strong><span class="classifier">str</span></dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="orca.orca.TableFuncWrapper.get_column">
<code class="sig-name descname"><span class="pre">get_column</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">column_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.TableFuncWrapper.get_column" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a column as a Series.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>column_name</strong><span class="classifier">str</span></dt><dd></dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>column</strong><span class="classifier">pandas.Series</span></dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="orca.orca.TableFuncWrapper.index">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">index</span></code><a class="headerlink" href="#orca.orca.TableFuncWrapper.index" title="Permalink to this definition">¶</a></dt>
<dd><p>Index of the underlying table. Will be None if that index is
unknown.</p>
</dd></dl>

<dl class="py method">
<dt id="orca.orca.TableFuncWrapper.local_columns">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">local_columns</span></code><a class="headerlink" href="#orca.orca.TableFuncWrapper.local_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>Only the columns contained in the DataFrame returned by the
wrapped function. (No registered columns included.)</p>
</dd></dl>

<dl class="py method">
<dt id="orca.orca.TableFuncWrapper.to_frame">
<code class="sig-name descname"><span class="pre">to_frame</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.TableFuncWrapper.to_frame" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a DataFrame with the given columns.</p>
<p>Will always return a copy of the underlying table.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>columns</strong><span class="classifier">sequence, optional</span></dt><dd><p>Sequence of the column names desired in the DataFrame.
If None all columns are returned.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>frame</strong><span class="classifier">pandas.DataFrame</span></dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="orca.orca.add_column">
<code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">add_column</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">column_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">column</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_scope</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'forever'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.add_column" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a new column to a table from a Series or callable.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>table_name</strong><span class="classifier">str</span></dt><dd><p>Table with which the column will be associated.</p>
</dd>
<dt><strong>column_name</strong><span class="classifier">str</span></dt><dd><p>Name for the column.</p>
</dd>
<dt><strong>column</strong><span class="classifier">pandas.Series or callable</span></dt><dd><p>Series should have an index matching the table to which it
is being added. If a callable, the function’s argument
names and keyword argument values will be matched to
registered variables when the function needs to be
evaluated by Orca. The function should return a Series.</p>
</dd>
<dt><strong>cache</strong><span class="classifier">bool, optional</span></dt><dd><p>Whether to cache the results of a provided callable. Does not
apply if <cite>column</cite> is a Series.</p>
</dd>
<dt><strong>cache_scope</strong><span class="classifier">{‘step’, ‘iteration’, ‘forever’}, optional</span></dt><dd><p>Scope for which to cache data. Default is to cache forever
(or until manually cleared). ‘iteration’ caches data for each
complete iteration of the pipeline, ‘step’ caches data for
a single step of the pipeline.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="orca.orca.add_injectable">
<code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">add_injectable</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">autocall</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_scope</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'forever'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">memoize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.add_injectable" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a value that will be injected into other functions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>name</strong><span class="classifier">str</span></dt><dd></dd>
<dt><strong>value</strong></dt><dd><p>If a callable and <cite>autocall</cite> is True then the function’s
argument names and keyword argument values will be matched
to registered variables when the function needs to be
evaluated by Orca. The return value will
be passed to any functions using this injectable. In all other
cases, <cite>value</cite> will be passed through untouched.</p>
</dd>
<dt><strong>autocall</strong><span class="classifier">bool, optional</span></dt><dd><p>Set to True to have injectable functions automatically called
(with argument matching) and the result injected instead of
the function itself.</p>
</dd>
<dt><strong>cache</strong><span class="classifier">bool, optional</span></dt><dd><p>Whether to cache the return value of an injectable function.
Only applies when <cite>value</cite> is a callable and <cite>autocall</cite> is True.</p>
</dd>
<dt><strong>cache_scope</strong><span class="classifier">{‘step’, ‘iteration’, ‘forever’}, optional</span></dt><dd><p>Scope for which to cache data. Default is to cache forever
(or until manually cleared). ‘iteration’ caches data for each
complete iteration of the pipeline, ‘step’ caches data for
a single step of the pipeline.</p>
</dd>
<dt><strong>memoize</strong><span class="classifier">bool, optional</span></dt><dd><p>If autocall is False it is still possible to cache function results
by setting this flag to True. Cached values are stored in a dictionary
keyed by argument values, so the argument values must be hashable.
Memoized functions have their caches cleared according to the same
rules as universal caching.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="orca.orca.add_step">
<code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">add_step</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">step_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">func</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.add_step" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a step function to Orca.</p>
<p>The function’s argument names and keyword argument values
will be matched to registered variables when the function
needs to be evaluated by Orca.
The argument name “iter_var” may be used to have the current
iteration variable injected.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>step_name</strong><span class="classifier">str</span></dt><dd></dd>
<dt><strong>func</strong><span class="classifier">callable</span></dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="orca.orca.add_table">
<code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">add_table</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">table</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_scope</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'forever'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">copy_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.add_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a table with Orca.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>table_name</strong><span class="classifier">str</span></dt><dd><p>Should be globally unique to this table.</p>
</dd>
<dt><strong>table</strong><span class="classifier">pandas.DataFrame or function</span></dt><dd><p>If a function, the function should return a DataFrame.
The function’s argument names and keyword argument values
will be matched to registered variables when the function
needs to be evaluated by Orca.</p>
</dd>
<dt><strong>cache</strong><span class="classifier">bool, optional</span></dt><dd><p>Whether to cache the results of a provided callable. Does not
apply if <cite>table</cite> is a DataFrame.</p>
</dd>
<dt><strong>cache_scope</strong><span class="classifier">{‘step’, ‘iteration’, ‘forever’}, optional</span></dt><dd><p>Scope for which to cache data. Default is to cache forever
(or until manually cleared). ‘iteration’ caches data for each
complete iteration of the pipeline, ‘step’ caches data for
a single step of the pipeline.</p>
</dd>
<dt><strong>copy_col</strong><span class="classifier">bool, optional</span></dt><dd><p>Whether to return copies when evaluating columns.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl>
<dt><strong>wrapped</strong><span class="classifier"><cite>DataFrameWrapper</cite> or <cite>TableFuncWrapper</cite></span></dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="orca.orca.broadcast">
<code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">broadcast</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cast</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">onto</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cast_on</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">onto_on</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cast_index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">onto_index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.broadcast" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a rule for merging two tables by broadcasting one onto
the other.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>cast, onto</strong><span class="classifier">str</span></dt><dd><p>Names of registered tables.</p>
</dd>
<dt><strong>cast_on, onto_on</strong><span class="classifier">str, optional</span></dt><dd><p>Column names used for merge, equivalent of <code class="docutils literal notranslate"><span class="pre">left_on</span></code>/<code class="docutils literal notranslate"><span class="pre">right_on</span></code>
parameters of pandas.merge.</p>
</dd>
<dt><strong>cast_index, onto_index</strong><span class="classifier">bool, optional</span></dt><dd><p>Whether to use table indexes for merge. Equivalent of
<code class="docutils literal notranslate"><span class="pre">left_index</span></code>/<code class="docutils literal notranslate"><span class="pre">right_index</span></code> parameters of pandas.merge.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="orca.orca.cache_on">
<code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">cache_on</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.cache_on" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether caching is currently enabled or disabled.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>on</strong><span class="classifier">bool</span></dt><dd><p>True if caching is enabled.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="orca.orca.clear_all">
<code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">clear_all</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.clear_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear any and all stored state from Orca.</p>
</dd></dl>

<dl class="py function">
<dt id="orca.orca.clear_cache">
<code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">clear_cache</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scope</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.clear_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear all cached data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>scope</strong><span class="classifier">{None, ‘step’, ‘iteration’, ‘forever’}, optional</span></dt><dd><p>Clear cached values with a given scope.
By default all cached values are removed.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="orca.orca.clear_column">
<code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">clear_column</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">column_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.clear_column" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear the cached copy of a dynamically generated column.
<em>Added in Orca v1.6.</em></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>table_name: str</strong></dt><dd><p>Table containing the column to clear.</p>
</dd>
<dt><strong>column_name: str</strong></dt><dd><p>Name of the column to clear.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="orca.orca.clear_columns">
<code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">clear_columns</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.clear_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear all (or a specified list) of the dynamically generated columns
associated with a table. <em>Added in Orca v1.6.</em></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>table_name: str</strong></dt><dd><p>Table name.</p>
</dd>
<dt><strong>columns:  list of str, optional, default None</strong></dt><dd><p>List of columns to clear. If None, all extra/computed
columns in the table will be cleeared.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="orca.orca.clear_injectable">
<code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">clear_injectable</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">injectable_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.clear_injectable" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear the cached value of an injectable. <em>Added in Orca v1.6.</em></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>name: str</strong></dt><dd><p>Name of injectable to clear.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="orca.orca.clear_table">
<code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">clear_table</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.clear_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear the cached copy of an entire table. <em>Added in Orca v1.6.</em></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>name: str</strong></dt><dd><p>Name of table to clear.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="orca.orca.column">
<code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">column</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">column_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_scope</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'forever'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.column" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorates functions that return a Series.</p>
<p>Decorator version of <cite>add_column</cite>. Series index must match
the named table. Column name defaults to name of function.</p>
<p>The function’s argument names and keyword argument values
will be matched to registered variables when the function
needs to be evaluated by Orca.
The argument name “iter_var” may be used to have the current
iteration variable injected.
The index of the returned Series must match the named table.</p>
</dd></dl>

<dl class="py function">
<dt id="orca.orca.column_map">
<code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">column_map</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tables</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.column_map" title="Permalink to this definition">¶</a></dt>
<dd><p>Take a list of tables and a list of column names and resolve which
columns come from which table.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>tables</strong><span class="classifier">sequence of _DataFrameWrapper or _TableFuncWrapper</span></dt><dd><p>Could also be sequence of modified pandas.DataFrames, the important
thing is that they have <code class="docutils literal notranslate"><span class="pre">.name</span></code> and <code class="docutils literal notranslate"><span class="pre">.columns</span></code> attributes.</p>
</dd>
<dt><strong>columns</strong><span class="classifier">sequence of str</span></dt><dd><p>The column names of interest.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>col_map</strong><span class="classifier">dict</span></dt><dd><p>Maps table names to lists of column names.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="orca.orca.disable_cache">
<code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">disable_cache</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.disable_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn off caching across Orca, even for registered variables
that have caching enabled.</p>
</dd></dl>

<dl class="py function">
<dt id="orca.orca.enable_cache">
<code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">enable_cache</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.enable_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Allow caching of registered variables that explicitly have
caching enabled.</p>
</dd></dl>

<dl class="py function">
<dt id="orca.orca.eval_step">
<code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">eval_step</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.eval_step" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluate a step as would be done within the pipeline environment
and return the result. Any keyword arguments are temporarily set
as injectables.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>name</strong><span class="classifier">str</span></dt><dd><p>Name of step to run.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>object</dt><dd><p>Anything returned by a step. (Though note that in Orca runs
return values from steps are ignored.)</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="orca.orca.eval_variable">
<code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">eval_variable</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.eval_variable" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute a single variable function registered with Orca
and return the result. Any keyword arguments are temporarily set
as injectables. This gives the value as would be injected into a function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>name</strong><span class="classifier">str</span></dt><dd><p>Name of variable to evaluate.
Use variable expressions to specify columns.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>object</dt><dd><p>For injectables and columns this directly returns whatever
object is returned by the registered function.
For tables this returns a DataFrameWrapper as if the table
had been injected into a function.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="orca.orca.get_broadcast">
<code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">get_broadcast</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cast_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">onto_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.get_broadcast" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a single broadcast.</p>
<p>Broadcasts are stored data about how to do a Pandas join.
A Broadcast object is a namedtuple with these attributes:</p>
<blockquote>
<div><ul class="simple">
<li><p>cast: the name of the table being broadcast</p></li>
<li><p>onto: the name of the table onto which “cast” is broadcast</p></li>
<li><p>cast_on: The optional name of a column on which to join.
None if the table index will be used instead.</p></li>
<li><p>onto_on: The optional name of a column on which to join.
None if the table index will be used instead.</p></li>
<li><p>cast_index: True if the table index should be used for the join.</p></li>
<li><p>onto_index: True if the table index should be used for the join.</p></li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>cast_name</strong><span class="classifier">str</span></dt><dd><p>The name of the table being braodcast.</p>
</dd>
<dt><strong>onto_name</strong><span class="classifier">str</span></dt><dd><p>The name of the table onto which <cite>cast_name</cite> is broadcast.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>broadcast</strong><span class="classifier">Broadcast</span></dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="orca.orca.get_injectable">
<code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">get_injectable</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.get_injectable" title="Permalink to this definition">¶</a></dt>
<dd><p>Get an injectable by name. <em>Does not</em> evaluate wrapped functions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>name</strong><span class="classifier">str</span></dt><dd></dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>injectable</dt><dd><p>Original value or evaluated value of an _InjectableFuncWrapper.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="orca.orca.get_injectable_func_source_data">
<code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">get_injectable_func_source_data</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.get_injectable_func_source_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Return data about an injectable function’s source, including file name,
line number, and source code.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>name</strong><span class="classifier">str</span></dt><dd></dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>filename</strong><span class="classifier">str</span></dt><dd></dd>
<dt><strong>lineno</strong><span class="classifier">int</span></dt><dd><p>The line number on which the function starts.</p>
</dd>
<dt><strong>source</strong><span class="classifier">str</span></dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="orca.orca.get_raw_column">
<code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">get_raw_column</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">column_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.get_raw_column" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a wrapped, registered column.</p>
<p>This function cannot return columns that are part of wrapped
DataFrames, it’s only for columns registered directly through Orca.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>table_name</strong><span class="classifier">str</span></dt><dd></dd>
<dt><strong>column_name</strong><span class="classifier">str</span></dt><dd></dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>wrapped</strong><span class="classifier">_SeriesWrapper or _ColumnFuncWrapper</span></dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="orca.orca.get_raw_injectable">
<code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">get_raw_injectable</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.get_raw_injectable" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a raw, possibly wrapped injectable.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>name</strong><span class="classifier">str</span></dt><dd></dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>inj</strong><span class="classifier">_InjectableFuncWrapper or object</span></dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="orca.orca.get_raw_table">
<code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">get_raw_table</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.get_raw_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a wrapped table by name and don’t do anything to it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>table_name</strong><span class="classifier">str</span></dt><dd></dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>table</strong><span class="classifier">DataFrameWrapper or TableFuncWrapper</span></dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="orca.orca.get_step">
<code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">get_step</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">step_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.get_step" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a wrapped step by name.</p>
</dd></dl>

<dl class="py function">
<dt id="orca.orca.get_step_table_names">
<code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">get_step_table_names</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">steps</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.get_step_table_names" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of table names injected into the provided steps.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>steps: list of str</strong></dt><dd><p>Steps to gather table inputs from.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>list of str</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="orca.orca.get_table">
<code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">get_table</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.get_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a registered table.</p>
<p>Decorated functions will be converted to <cite>DataFrameWrapper</cite>.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>table_name</strong><span class="classifier">str</span></dt><dd></dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl>
<dt><strong>table</strong><span class="classifier"><cite>DataFrameWrapper</cite></span></dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="orca.orca.injectable">
<code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">injectable</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">autocall</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_scope</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'forever'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">memoize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.injectable" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorates functions that will be injected into other functions.</p>
<p>Decorator version of <cite>add_injectable</cite>. Name defaults to
name of function.</p>
<p>The function’s argument names and keyword argument values
will be matched to registered variables when the function
needs to be evaluated by Orca.
The argument name “iter_var” may be used to have the current
iteration variable injected.</p>
</dd></dl>

<dl class="py function">
<dt id="orca.orca.injectable_type">
<code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">injectable_type</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.injectable_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Classify an injectable as either ‘variable’ or ‘function’.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>name</strong><span class="classifier">str</span></dt><dd></dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>inj_type</strong><span class="classifier">{‘variable’, ‘function’}</span></dt><dd><p>If the injectable is an automatically called function or any other
type of callable the type will be ‘function’, all other injectables
will be have type ‘variable’.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="orca.orca.injectables">
<code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">injectables</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.injectables" title="Permalink to this definition">¶</a></dt>
<dd><p>Temporarily add injectables to the pipeline environment.
Takes only keyword arguments.</p>
<p>Injectables will be returned to their original state when the context
manager exits.</p>
</dd></dl>

<dl class="py function">
<dt id="orca.orca.is_broadcast">
<code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">is_broadcast</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cast_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">onto_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.is_broadcast" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks whether a relationship exists for broadcast <cite>cast_name</cite>
onto <cite>onto_name</cite>.</p>
</dd></dl>

<dl class="py function">
<dt id="orca.orca.is_expression">
<code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">is_expression</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.is_expression" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks whether a given name is a simple variable name or a compound
variable expression.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>name</strong><span class="classifier">str</span></dt><dd></dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>is_expr</strong><span class="classifier">bool</span></dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="orca.orca.is_injectable">
<code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">is_injectable</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.is_injectable" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks whether a given name can be mapped to an injectable.</p>
</dd></dl>

<dl class="py function">
<dt id="orca.orca.is_step">
<code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">is_step</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">step_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.is_step" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether a given name refers to a registered step.</p>
</dd></dl>

<dl class="py function">
<dt id="orca.orca.is_table">
<code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">is_table</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.is_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns whether a given name refers to a registered table.</p>
</dd></dl>

<dl class="py class">
<dt id="orca.orca.iter_step">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">iter_step</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">step_num</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">step_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.iter_step" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py attribute">
<dt id="orca.orca.iter_step.step_name">
<code class="sig-name descname"><span class="pre">step_name</span></code><a class="headerlink" href="#orca.orca.iter_step.step_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

<dl class="py attribute">
<dt id="orca.orca.iter_step.step_num">
<code class="sig-name descname"><span class="pre">step_num</span></code><a class="headerlink" href="#orca.orca.iter_step.step_num" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="orca.orca.list_broadcasts">
<code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">list_broadcasts</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.list_broadcasts" title="Permalink to this definition">¶</a></dt>
<dd><p>List of registered broadcasts as (cast table name, onto table name).</p>
</dd></dl>

<dl class="py function">
<dt id="orca.orca.list_columns">
<code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">list_columns</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.list_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>List of (table name, registered column name) pairs.</p>
</dd></dl>

<dl class="py function">
<dt id="orca.orca.list_columns_for_table">
<code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">list_columns_for_table</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.list_columns_for_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of all the extra columns registered for a given table.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>table_name</strong><span class="classifier">str</span></dt><dd></dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>columns</strong><span class="classifier">list of str</span></dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="orca.orca.list_injectables">
<code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">list_injectables</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.list_injectables" title="Permalink to this definition">¶</a></dt>
<dd><p>List of registered injectables.</p>
</dd></dl>

<dl class="py function">
<dt id="orca.orca.list_steps">
<code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">list_steps</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.list_steps" title="Permalink to this definition">¶</a></dt>
<dd><p>List of registered step names.</p>
</dd></dl>

<dl class="py function">
<dt id="orca.orca.list_tables">
<code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">list_tables</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.list_tables" title="Permalink to this definition">¶</a></dt>
<dd><p>List of table names.</p>
</dd></dl>

<dl class="py function">
<dt id="orca.orca.merge_tables">
<code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">merge_tables</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tables</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">drop_intersection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.merge_tables" title="Permalink to this definition">¶</a></dt>
<dd><p>Merge a number of tables onto a target table. Tables must have
registered merge rules via the <cite>broadcast</cite> function.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>target</strong><span class="classifier">str, DataFrameWrapper, or TableFuncWrapper</span></dt><dd><p>Name of the table (or wrapped table) onto which tables will be merged.</p>
</dd>
<dt><strong>tables</strong><span class="classifier">list of <cite>DataFrameWrapper</cite>, <cite>TableFuncWrapper</cite>, or str</span></dt><dd><p>All of the tables to merge. Should include the target table.</p>
</dd>
<dt><strong>columns</strong><span class="classifier">list of str, optional</span></dt><dd><p>If given, columns will be mapped to <cite>tables</cite> and only those columns
will be requested from each table. The final merged table will have
only these columns. By default all columns are used from every
table.</p>
</dd>
<dt><strong>drop_intersection</strong><span class="classifier">bool</span></dt><dd><p>If True, keep the left most occurence of any column name if it occurs
on more than one table.  This prevents getting back the same column
with suffixes applied by pd.merge.  If false, columns names will be
suffixed with the table names - e.g. zone_id_buildings and
zone_id_parcels.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>merged</strong><span class="classifier">pandas.DataFrame</span></dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="orca.orca.run">
<code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">run</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">steps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">iter_vars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_out</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out_interval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out_base_tables</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out_run_tables</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compress</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out_base_local</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out_run_local</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run steps in series, optionally repeatedly over some sequence.
The current iteration variable is set as a global injectable
called <code class="docutils literal notranslate"><span class="pre">iter_var</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>steps</strong><span class="classifier">list of str</span></dt><dd><p>List of steps to run identified by their name.</p>
</dd>
<dt><strong>iter_vars</strong><span class="classifier">iterable, optional</span></dt><dd><p>The values of <cite>iter_vars</cite> will be made available as an injectable
called <code class="docutils literal notranslate"><span class="pre">iter_var</span></code> when repeatedly running <cite>steps</cite>.</p>
</dd>
<dt><strong>data_out</strong><span class="classifier">str, optional</span></dt><dd><p>An optional filename to which all tables injected into any step
in <cite>steps</cite> will be saved every <cite>out_interval</cite> iterations.
File will be a pandas HDF data store.</p>
</dd>
<dt><strong>out_interval</strong><span class="classifier">int, optional</span></dt><dd><p>Iteration interval on which to save data to <cite>data_out</cite>. For example,
2 will save out every 2 iterations, 5 every 5 iterations.
Default is every iteration.
The results of the first and last iterations are always included.
The input (base) tables are also included and prefixed with <cite>base/</cite>,
these represent the state of the system before any steps have been
executed.
The interval is defined relative to the first iteration. For example,
a run begining in 2015 with an out_interval of 2, will write out
results for 2015, 2017, etc.</p>
</dd>
<dt><strong>out_base_tables: list of str, optional, default None</strong></dt><dd><p>List of base tables to write. If not provided, tables injected
into ‘steps’ will be written.</p>
</dd>
<dt><strong>out_run_tables: list of str, optional, default None</strong></dt><dd><p>List of run tables to write. If not provided, tables injected
into ‘steps’ will be written.</p>
</dd>
<dt><strong>compress: boolean, optional, default False</strong></dt><dd><p>Whether to compress output file using standard HDF5 zlib compression.
Compression yields much smaller files using slightly more CPU.</p>
</dd>
<dt><strong>out_base_local: boolean, optional, default True</strong></dt><dd><p>For tables in out_base_tables, whether to store only local columns (True)
or both, local and computed columns (False).</p>
</dd>
<dt><strong>out_run_local: boolean, optional, default True</strong></dt><dd><p>For tables in out_run_tables, whether to store only local columns (True)
or both, local and computed columns (False).</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="orca.orca.step">
<code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">step</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">step_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.step" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorates functions that will be called by the <cite>run</cite> function.</p>
<p>Decorator version of <cite>add_step</cite>. step name defaults to
name of function.</p>
<p>The function’s argument names and keyword argument values
will be matched to registered variables when the function
needs to be evaluated by Orca.
The argument name “iter_var” may be used to have the current
iteration variable injected.</p>
</dd></dl>

<dl class="py function">
<dt id="orca.orca.table">
<code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">table</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_scope</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'forever'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">copy_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.table" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorates functions that return DataFrames.</p>
<p>Decorator version of <cite>add_table</cite>. Table name defaults to
name of function.</p>
<p>The function’s argument names and keyword argument values
will be matched to registered variables when the function
needs to be evaluated by Orca.
The argument name “iter_var” may be used to have the current
iteration variable injected.</p>
</dd></dl>

<dl class="py function">
<dt id="orca.orca.table_type">
<code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">table_type</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.table_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the type of a registered table.</p>
<p>The type can be either “dataframe” or “function”.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>table_name</strong><span class="classifier">str</span></dt><dd></dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>table_type</strong><span class="classifier">{‘dataframe’, ‘function’}</span></dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="orca.orca.temporary_tables">
<code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">temporary_tables</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.temporary_tables" title="Permalink to this definition">¶</a></dt>
<dd><p>Temporarily set DataFrames as registered tables.</p>
<p>Tables will be returned to their original state when the context
manager exits. Caching is not enabled for tables registered via
this function.</p>
</dd></dl>

<dl class="py function">
<dt id="orca.orca.update_column_scope">
<code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">update_column_scope</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">column_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_scope</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.update_column_scope" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the cache scope for a wrapped column function. Clears
the cache if the new scope is more granular than the existing.
<em>Added in Orca v1.6.</em></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>table_name: str</strong></dt><dd><p>Name of the table.</p>
</dd>
<dt><strong>column_name: str</strong></dt><dd><p>Name of the column to update.</p>
</dd>
<dt><strong>new_scope: str, optional default None</strong></dt><dd><p>Valid values: None, ‘forever’, ‘iteration’, ‘step’
None implies no caching.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="orca.orca.update_injectable_scope">
<code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">update_injectable_scope</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_scope</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.update_injectable_scope" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the cache scope for a wrapped injectable function.
Clears the cache if the new scope is more granular
than the existing. <em>Added in Orca v1.6.</em></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>name: str</strong></dt><dd><p>Name of the injectable to update.</p>
</dd>
<dt><strong>new_scope: str, optional default None</strong></dt><dd><p>Valid values: None, ‘forever’, ‘iteration’, ‘step’
None implies no caching.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="orca.orca.update_table_scope">
<code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">update_table_scope</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_scope</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.update_table_scope" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the cache scope for a wrapped table function. Clears
the cache if the new scope is more granular than the existing.
<em>Added in Orca v1.6.</em></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>name: str</strong></dt><dd><p>Name of the table to update.</p>
</dd>
<dt><strong>new_scope: str, optional default None</strong></dt><dd><p>Valid values: None, ‘forever’, ‘iteration’, ‘step’
None implies no caching.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="orca.orca.write_tables">
<code class="sig-prename descclassname"><span class="pre">orca.orca.</span></code><code class="sig-name descname"><span class="pre">write_tables</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">table_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compress</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">local</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#orca.orca.write_tables" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes tables to a pandas.HDFStore file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>fname</strong><span class="classifier">str</span></dt><dd><p>File name for HDFStore. Will be opened in append mode and closed
at the end of this function.</p>
</dd>
<dt><strong>table_names: list of str, optional, default None</strong></dt><dd><p>List of tables to write. If None, all registered tables will
be written.</p>
</dd>
<dt><strong>prefix: str</strong></dt><dd><p>If not None, used to prefix the output table names so that
multiple iterations can go in the same file.</p>
</dd>
<dt><strong>compress: boolean</strong></dt><dd><p>Whether to compress output file using standard HDF5-readable
zlib compression, default False.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="server.html" class="btn btn-neutral float-right" title="Orca Server" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="example.html" class="btn btn-neutral float-left" title="Example" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, UrbanSim Inc.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>